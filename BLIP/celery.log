[2024-04-19 12:48:36,418: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 12:48:36,423: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 12:48:36,423: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 12:48:36,425: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 12:48:37,431: INFO/MainProcess] mingle: all alone
[2024-04-19 12:48:37,436: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 12:48:47,314: INFO/MainProcess] Task captionGenerateTasks.get_image[2f2379f8-633c-484f-9f10-f15689d1adbf] received
[2024-04-19 12:48:48,023: WARNING/ForkPoolWorker-1] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py:662: RuntimeWarning: Exception raised outside body: TypeError('load_model() takes 0 positional arguments but 1 was given'):
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 515, in trace_task
    _chsig.apply_async(
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/canvas.py", line 400, in apply_async
    return _apply(args, kwargs, **options)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 559, in apply_async
    check_arguments(*(args or ()), **(kwargs or {}))
TypeError: load_model() takes 0 positional arguments but 1 was given

  warn(RuntimeWarning(

[2024-04-19 12:48:48,025: ERROR/ForkPoolWorker-1] Task captionGenerateTasks.get_image[2f2379f8-633c-484f-9f10-f15689d1adbf] raised unexpected: TypeError('load_model() takes 0 positional arguments but 1 was given')
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 515, in trace_task
    _chsig.apply_async(
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/canvas.py", line 400, in apply_async
    return _apply(args, kwargs, **options)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 559, in apply_async
    check_arguments(*(args or ()), **(kwargs or {}))
TypeError: load_model() takes 0 positional arguments but 1 was given
[2024-04-19 12:50:52,904: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 12:50:52,910: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 12:50:52,910: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 12:50:52,913: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 12:50:53,920: INFO/MainProcess] mingle: all alone
[2024-04-19 12:50:53,927: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 12:50:53,973: INFO/MainProcess] Task captionGenerateTasks.get_image[231ecaba-a8af-475e-bf28-2795b8877909] received
[2024-04-19 12:50:54,466: INFO/MainProcess] Task captionGenerateTasks.load_model[9be5e4c6-1a9e-4724-9e4b-94ec7d42b0f1] received
[2024-04-19 12:50:54,470: ERROR/ForkPoolWorker-1] Task captionGenerateTasks.get_image[231ecaba-a8af-475e-bf28-2795b8877909] raised unexpected: EncodeError(TypeError('Object of type Image is not JSON serializable'))
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 41, in _reraise_errors
    yield
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 220, in dumps
    payload = encoder(data)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 63, in dumps
    return _dumps(s, cls=cls, **dict(default_kwargs, **kwargs))
  File "/usr/lib64/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/lib64/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib64/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 47, in default
    return super().default(o)
  File "/usr/lib64/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Image is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 520, in trace_task
    task.backend.mark_as_done(
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 157, in mark_as_done
    self.store_result(task_id, result, state, request=request)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 526, in store_result
    self._store_result(task_id, result, state, traceback,
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 979, in _store_result
    self._set_with_state(self.get_key_for_task(task_id), self.encode(meta), state)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 413, in encode
    _, _, payload = self._encode(data)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 417, in _encode
    return dumps(data, serializer=self.serializer)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 220, in dumps
    payload = encoder(data)
  File "/usr/lib64/python3.9/contextlib.py", line 137, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 45, in _reraise_errors
    reraise(wrapper, wrapper(exc), sys.exc_info()[2])
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/exceptions.py", line 34, in reraise
    raise value.with_traceback(tb)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 41, in _reraise_errors
    yield
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 220, in dumps
    payload = encoder(data)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 63, in dumps
    return _dumps(s, cls=cls, **dict(default_kwargs, **kwargs))
  File "/usr/lib64/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/lib64/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib64/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 47, in default
    return super().default(o)
  File "/usr/lib64/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
kombu.exceptions.EncodeError: Object of type Image is not JSON serializable
[2024-04-19 12:51:01,833: ERROR/ForkPoolWorker-3] Task captionGenerateTasks.load_model[9be5e4c6-1a9e-4724-9e4b-94ec7d42b0f1] raised unexpected: RuntimeError('Found no NVIDIA driver on your system. Please check that you have an NVIDIA GPU and installed a driver from http://www.nvidia.com/Download/index.aspx')
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/captionGenerateTasks.py", line 32, in load_model
    model = BlipForConditionalGeneration.from_pretrained("Salesforce/blip-image-captioning-base").to('cuda')
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/transformers/modeling_utils.py", line 2692, in to
    return super().to(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 1152, in to
    return self._apply(convert)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 802, in _apply
    module._apply(fn)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 802, in _apply
    module._apply(fn)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 802, in _apply
    module._apply(fn)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 825, in _apply
    param_applied = fn(param)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 1150, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/cuda/__init__.py", line 302, in _lazy_init
    torch._C._cuda_init()
RuntimeError: Found no NVIDIA driver on your system. Please check that you have an NVIDIA GPU and installed a driver from http://www.nvidia.com/Download/index.aspx
[2024-04-19 12:53:48,596: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 12:53:48,600: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 12:53:48,600: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 12:53:48,601: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 12:53:49,607: INFO/MainProcess] mingle: all alone
[2024-04-19 12:53:49,614: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 12:53:51,173: INFO/MainProcess] Task captionGenerateTasks.save_image[283f8397-3bfe-4dc8-8365-526978ea6dbf] received
[2024-04-19 12:53:51,652: INFO/MainProcess] Task captionGenerateTasks.load_model[a24434ef-2a17-4f7c-8352-cf7507efdac8] received
[2024-04-19 12:53:51,653: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[283f8397-3bfe-4dc8-8365-526978ea6dbf] succeeded in 0.4785952214151621s: '/tmp/5a352bc9-438a-4319-b95e-7df20384b9bc.jpg'
[2024-04-19 12:53:52,868: ERROR/ForkPoolWorker-3] Task captionGenerateTasks.load_model[a24434ef-2a17-4f7c-8352-cf7507efdac8] raised unexpected: RuntimeError('Found no NVIDIA driver on your system. Please check that you have an NVIDIA GPU and installed a driver from http://www.nvidia.com/Download/index.aspx')
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/captionGenerateTasks.py", line 27, in load_model
    model = BlipForConditionalGeneration.from_pretrained("Salesforce/blip-image-captioning-base").to('cuda')
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/transformers/modeling_utils.py", line 2692, in to
    return super().to(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 1152, in to
    return self._apply(convert)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 802, in _apply
    module._apply(fn)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 802, in _apply
    module._apply(fn)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 802, in _apply
    module._apply(fn)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 825, in _apply
    param_applied = fn(param)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/nn/modules/module.py", line 1150, in convert
    return t.to(device, dtype if t.is_floating_point() or t.is_complex() else None, non_blocking)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/torch/cuda/__init__.py", line 302, in _lazy_init
    torch._C._cuda_init()
RuntimeError: Found no NVIDIA driver on your system. Please check that you have an NVIDIA GPU and installed a driver from http://www.nvidia.com/Download/index.aspx
[2024-04-19 12:54:16,102: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 12:54:16,115: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 12:54:16,116: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 12:54:16,117: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 12:54:17,132: INFO/MainProcess] mingle: all alone
[2024-04-19 12:54:17,142: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 12:54:17,180: INFO/MainProcess] Task captionGenerateTasks.save_image[85e6692c-4b38-40d5-ad7d-8d1eec91bd89] received
[2024-04-19 12:54:17,707: INFO/MainProcess] Task captionGenerateTasks.load_model[f6498588-a214-4468-8b8e-64e76de2697c] received
[2024-04-19 12:54:17,708: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[85e6692c-4b38-40d5-ad7d-8d1eec91bd89] succeeded in 0.5270265862345695s: '/tmp/5083fbf2-f836-4298-8657-c2dfae427f1b.jpg'
[2024-04-19 12:54:18,996: WARNING/ForkPoolWorker-3] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py:662: RuntimeWarning: Exception raised outside body: TypeError("generate_caption() missing 2 required positional arguments: 'processor' and 'model'"):
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 515, in trace_task
    _chsig.apply_async(
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/canvas.py", line 400, in apply_async
    return _apply(args, kwargs, **options)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 559, in apply_async
    check_arguments(*(args or ()), **(kwargs or {}))
TypeError: generate_caption() missing 2 required positional arguments: 'processor' and 'model'

  warn(RuntimeWarning(

[2024-04-19 12:54:18,998: ERROR/ForkPoolWorker-3] Task captionGenerateTasks.load_model[f6498588-a214-4468-8b8e-64e76de2697c] raised unexpected: TypeError("generate_caption() missing 2 required positional arguments: 'processor' and 'model'")
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 515, in trace_task
    _chsig.apply_async(
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/canvas.py", line 400, in apply_async
    return _apply(args, kwargs, **options)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 559, in apply_async
    check_arguments(*(args or ()), **(kwargs or {}))
TypeError: generate_caption() missing 2 required positional arguments: 'processor' and 'model'
[2024-04-19 12:57:15,054: INFO/MainProcess] Task captionGenerateTasks.save_image[28105646-43ac-41bb-a60f-39955ac6bce8] received
[2024-04-19 12:57:15,474: WARNING/ForkPoolWorker-1] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py:662: RuntimeWarning: Exception raised outside body: TypeError('load_model() takes 0 positional arguments but 1 was given'):
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 515, in trace_task
    _chsig.apply_async(
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/canvas.py", line 400, in apply_async
    return _apply(args, kwargs, **options)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 559, in apply_async
    check_arguments(*(args or ()), **(kwargs or {}))
TypeError: load_model() takes 0 positional arguments but 1 was given

  warn(RuntimeWarning(

[2024-04-19 12:57:15,475: ERROR/ForkPoolWorker-1] Task captionGenerateTasks.save_image[28105646-43ac-41bb-a60f-39955ac6bce8] raised unexpected: TypeError('load_model() takes 0 positional arguments but 1 was given')
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 515, in trace_task
    _chsig.apply_async(
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/canvas.py", line 400, in apply_async
    return _apply(args, kwargs, **options)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 559, in apply_async
    check_arguments(*(args or ()), **(kwargs or {}))
TypeError: load_model() takes 0 positional arguments but 1 was given
[2024-04-19 13:00:34,172: INFO/MainProcess] Task captionGenerateTasks.save_image[a8f73c59-5525-4351-a8b9-6a1173e98750] received
[2024-04-19 13:00:34,619: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[a8f73c59-5525-4351-a8b9-6a1173e98750] succeeded in 0.44684585370123386s: '/tmp/4c6db8da-c3f6-434c-90e3-9b7033cc80d2.jpg'
[2024-04-19 13:00:34,621: INFO/MainProcess] Task captionGenerateTasks.load_model[210d06f2-1b8a-42d0-8ab5-ca73b17538b6] received
[2024-04-19 13:00:35,799: ERROR/ForkPoolWorker-1] Task captionGenerateTasks.load_model[210d06f2-1b8a-42d0-8ab5-ca73b17538b6] raised unexpected: EncodeError(TypeError('Object of type BlipProcessor is not JSON serializable'))
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 41, in _reraise_errors
    yield
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 220, in dumps
    payload = encoder(data)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 63, in dumps
    return _dumps(s, cls=cls, **dict(default_kwargs, **kwargs))
  File "/usr/lib64/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/lib64/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib64/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 47, in default
    return super().default(o)
  File "/usr/lib64/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type BlipProcessor is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 520, in trace_task
    task.backend.mark_as_done(
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 157, in mark_as_done
    self.store_result(task_id, result, state, request=request)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 526, in store_result
    self._store_result(task_id, result, state, traceback,
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 979, in _store_result
    self._set_with_state(self.get_key_for_task(task_id), self.encode(meta), state)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 413, in encode
    _, _, payload = self._encode(data)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 417, in _encode
    return dumps(data, serializer=self.serializer)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 220, in dumps
    payload = encoder(data)
  File "/usr/lib64/python3.9/contextlib.py", line 137, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 45, in _reraise_errors
    reraise(wrapper, wrapper(exc), sys.exc_info()[2])
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/exceptions.py", line 34, in reraise
    raise value.with_traceback(tb)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 41, in _reraise_errors
    yield
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 220, in dumps
    payload = encoder(data)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 63, in dumps
    return _dumps(s, cls=cls, **dict(default_kwargs, **kwargs))
  File "/usr/lib64/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/lib64/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib64/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 47, in default
    return super().default(o)
  File "/usr/lib64/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
kombu.exceptions.EncodeError: Object of type BlipProcessor is not JSON serializable
[2024-04-19 13:00:59,816: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 13:00:59,820: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 13:00:59,820: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 13:00:59,823: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 13:01:00,828: INFO/MainProcess] mingle: all alone
[2024-04-19 13:01:00,837: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 13:01:01,707: INFO/MainProcess] Task captionGenerateTasks.save_image[274fffa8-11ba-40cb-9dbb-62092b4ec4f5] received
[2024-04-19 13:01:02,124: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[274fffa8-11ba-40cb-9dbb-62092b4ec4f5] succeeded in 0.4156824005767703s: '/tmp/8197e551-65d1-404d-9356-6fe360bd6f8a.jpg'
[2024-04-19 13:01:02,126: INFO/MainProcess] Task captionGenerateTasks.load_model[2730bdec-17e4-45fa-ba4a-a4a0ff9dbb7a] received
[2024-04-19 13:01:03,337: ERROR/ForkPoolWorker-1] Task captionGenerateTasks.load_model[2730bdec-17e4-45fa-ba4a-a4a0ff9dbb7a] raised unexpected: EncodeError(TypeError('Object of type BlipProcessor is not JSON serializable'))
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 41, in _reraise_errors
    yield
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 220, in dumps
    payload = encoder(data)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 63, in dumps
    return _dumps(s, cls=cls, **dict(default_kwargs, **kwargs))
  File "/usr/lib64/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/lib64/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib64/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 47, in default
    return super().default(o)
  File "/usr/lib64/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type BlipProcessor is not JSON serializable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 520, in trace_task
    task.backend.mark_as_done(
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 157, in mark_as_done
    self.store_result(task_id, result, state, request=request)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 526, in store_result
    self._store_result(task_id, result, state, traceback,
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 979, in _store_result
    self._set_with_state(self.get_key_for_task(task_id), self.encode(meta), state)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 413, in encode
    _, _, payload = self._encode(data)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/backends/base.py", line 417, in _encode
    return dumps(data, serializer=self.serializer)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 220, in dumps
    payload = encoder(data)
  File "/usr/lib64/python3.9/contextlib.py", line 137, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 45, in _reraise_errors
    reraise(wrapper, wrapper(exc), sys.exc_info()[2])
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/exceptions.py", line 34, in reraise
    raise value.with_traceback(tb)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 41, in _reraise_errors
    yield
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/serialization.py", line 220, in dumps
    payload = encoder(data)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 63, in dumps
    return _dumps(s, cls=cls, **dict(default_kwargs, **kwargs))
  File "/usr/lib64/python3.9/json/__init__.py", line 234, in dumps
    return cls(
  File "/usr/lib64/python3.9/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib64/python3.9/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/kombu/utils/json.py", line 47, in default
    return super().default(o)
  File "/usr/lib64/python3.9/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
kombu.exceptions.EncodeError: Object of type BlipProcessor is not JSON serializable
[2024-04-19 14:51:48,087: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 14:51:48,092: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 14:51:48,093: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 14:51:48,096: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 14:51:49,103: INFO/MainProcess] mingle: all alone
[2024-04-19 14:51:49,109: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 14:52:02,108: INFO/MainProcess] Task captionGenerateTasks.save_image[937792bf-1af2-4fd2-be8c-aa6b3925772f] received
[2024-04-19 14:52:02,622: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[937792bf-1af2-4fd2-be8c-aa6b3925772f] succeeded in 0.5132557861506939s: '/tmp/dbb17f02-e1d6-48ee-96c1-58a27343bfc1.jpg'
[2024-04-19 14:52:02,624: INFO/MainProcess] Task captionGenerateTasks.generate_caption[02f39434-08cf-43e5-9030-8920a4d544b2] received
[2024-04-19 14:52:04,798: WARNING/ForkPoolWorker-1] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/transformers/generation/utils.py:1141: UserWarning: Using the model-agnostic default `max_length` (=20) to control the generation length. We recommend setting `max_new_tokens` to control the maximum length of the generation.
  warnings.warn(

[2024-04-19 14:52:05,563: INFO/ForkPoolWorker-1] Task captionGenerateTasks.generate_caption[02f39434-08cf-43e5-9030-8920a4d544b2] succeeded in 2.9387434162199497s: 'a group of people skiing down a snowy hill'
[2024-04-19 14:52:19,978: INFO/MainProcess] Task captionGenerateTasks.save_image[b6eb86f8-f351-4d4e-86a9-7623dcebc082] received
[2024-04-19 14:52:20,552: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[b6eb86f8-f351-4d4e-86a9-7623dcebc082] succeeded in 0.5730633260682225s: '/tmp/d6fe3f63-344d-42a5-bf0d-aa44023f597c.jpg'
[2024-04-19 14:52:20,553: INFO/MainProcess] Task captionGenerateTasks.generate_caption[df2a0d43-cfc0-4008-93bb-39752c053885] received
[2024-04-19 14:52:22,881: INFO/ForkPoolWorker-1] Task captionGenerateTasks.generate_caption[df2a0d43-cfc0-4008-93bb-39752c053885] succeeded in 2.3273164285346866s: 'a group of people skiing down a snowy hill'
[2024-04-19 14:53:23,614: INFO/MainProcess] Task captionGenerateTasks.save_image[7d030c65-4828-4fa9-9548-5a81dff27887] received
[2024-04-19 14:53:24,069: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[7d030c65-4828-4fa9-9548-5a81dff27887] succeeded in 0.4538020705804229s: '/tmp/1bde639b-6fa9-4aa6-9c52-11386782c53a.jpg'
[2024-04-19 14:53:24,070: INFO/MainProcess] Task captionGenerateTasks.generate_caption[508b9568-bc5f-4871-bf36-11b247558366] received
[2024-04-19 14:53:26,292: INFO/ForkPoolWorker-1] Task captionGenerateTasks.generate_caption[508b9568-bc5f-4871-bf36-11b247558366] succeeded in 2.2209954895079136s: 'a group of people skiing down a snowy hill'
[2024-04-19 14:55:24,795: INFO/MainProcess] Task captionGenerateTasks.save_image[fe60fe61-5ea1-416e-aaeb-4b5d4c4a27b8] received
[2024-04-19 14:55:25,242: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[fe60fe61-5ea1-416e-aaeb-4b5d4c4a27b8] succeeded in 0.4467933801934123s: '/tmp/e92b82b5-edd4-443d-b1f1-c1462d380071.jpg'
[2024-04-19 14:55:25,242: INFO/MainProcess] Task captionGenerateTasks.generate_caption[f2b26b3f-bfaa-43ef-8569-8b18efb196c0] received
[2024-04-19 14:55:27,697: INFO/ForkPoolWorker-1] Task captionGenerateTasks.generate_caption[f2b26b3f-bfaa-43ef-8569-8b18efb196c0] succeeded in 2.4539187429472804s: 'a group of people skiing down a snowy hill'
[2024-04-19 15:03:25,933: INFO/MainProcess] Task captionGenerateTasks.save_image[86c32633-cabd-40e0-b6d8-71aba3e2cc37] received
[2024-04-19 15:03:25,936: ERROR/ForkPoolWorker-1] Task captionGenerateTasks.save_image[86c32633-cabd-40e0-b6d8-71aba3e2cc37] raised unexpected: InvalidSchema('No connection adapters were found for "[\'http://images.cocodataset.org/unlabeled2017/000000562987.jpg\', \'http://images.cocodataset.org/unlabeled2017/000000369693.jpg\', \'http://images.cocodataset.org/unlabeled2017/000000385948.jpg\']"')
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/captionGenerateTasks.py", line 15, in save_image
    response = requests.get(img_url, stream=True)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/requests/api.py", line 73, in get
    return request("get", url, params=params, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/requests/api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/requests/sessions.py", line 697, in send
    adapter = self.get_adapter(url=request.url)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/requests/sessions.py", line 794, in get_adapter
    raise InvalidSchema(f"No connection adapters were found for {url!r}")
requests.exceptions.InvalidSchema: No connection adapters were found for "['http://images.cocodataset.org/unlabeled2017/000000562987.jpg', 'http://images.cocodataset.org/unlabeled2017/000000369693.jpg', 'http://images.cocodataset.org/unlabeled2017/000000385948.jpg']"
[2024-04-19 15:04:02,138: INFO/MainProcess] Task captionGenerateTasks.save_image[eeb49efd-30ab-4427-bb1f-85331402a58b] received
[2024-04-19 15:04:02,139: INFO/MainProcess] Task captionGenerateTasks.save_image[e4b1408a-9c16-48b0-805d-a3a315f67bff] received
[2024-04-19 15:04:02,140: INFO/MainProcess] Task captionGenerateTasks.save_image[a0b336b2-54ba-4465-adf4-fbd4546a29f3] received
[2024-04-19 15:04:02,469: INFO/MainProcess] Task captionGenerateTasks.generate_caption[60f4a2fb-8782-4d5b-83fe-bb68f2cbfaee] received
[2024-04-19 15:04:02,470: INFO/ForkPoolWorker-2] Task captionGenerateTasks.save_image[a0b336b2-54ba-4465-adf4-fbd4546a29f3] succeeded in 0.32811690773814917s: '/tmp/73cf079e-b2b8-423a-ac68-959a9cd29338.jpg'
[2024-04-19 15:04:02,614: INFO/MainProcess] Task captionGenerateTasks.generate_caption[ebbb2150-f988-4740-bbff-11a5bd5385e9] received
[2024-04-19 15:04:02,614: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[eeb49efd-30ab-4427-bb1f-85331402a58b] succeeded in 0.47394944727420807s: '/tmp/0c2850af-6033-4f33-baf7-96ab04158397.jpg'
[2024-04-19 15:04:02,625: INFO/MainProcess] Task captionGenerateTasks.generate_caption[2e04a4e7-2bb9-4f75-986c-4112010c2b8d] received
[2024-04-19 15:04:02,626: INFO/ForkPoolWorker-3] Task captionGenerateTasks.save_image[e4b1408a-9c16-48b0-805d-a3a315f67bff] succeeded in 0.48624097369611263s: '/tmp/ed28606e-3428-4164-b621-4b88a978f294.jpg'
[2024-04-19 15:04:06,604: WARNING/ForkPoolWorker-2] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/transformers/generation/utils.py:1141: UserWarning: Using the model-agnostic default `max_length` (=20) to control the generation length. We recommend setting `max_new_tokens` to control the maximum length of the generation.
  warnings.warn(

[2024-04-19 15:04:06,755: WARNING/ForkPoolWorker-4] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/transformers/generation/utils.py:1141: UserWarning: Using the model-agnostic default `max_length` (=20) to control the generation length. We recommend setting `max_new_tokens` to control the maximum length of the generation.
  warnings.warn(

[2024-04-19 15:04:08,084: INFO/ForkPoolWorker-4] Task captionGenerateTasks.generate_caption[60f4a2fb-8782-4d5b-83fe-bb68f2cbfaee] succeeded in 5.6146087711676955s: 'a group of people flying kites in the sky'
[2024-04-19 15:04:08,225: INFO/ForkPoolWorker-1] Task captionGenerateTasks.generate_caption[2e04a4e7-2bb9-4f75-986c-4112010c2b8d] succeeded in 5.5992391994223s: 'two cell phones in a person\'s hand'
[2024-04-19 15:04:08,500: INFO/ForkPoolWorker-2] Task captionGenerateTasks.generate_caption[ebbb2150-f988-4740-bbff-11a5bd5385e9] succeeded in 5.885994373820722s: 'a woman sitting at a table'
[2024-04-19 15:04:30,649: INFO/MainProcess] Task captionGenerateTasks.save_image[524ede47-bf41-41cf-9f6d-5392195bfd89] received
[2024-04-19 15:04:30,650: INFO/MainProcess] Task captionGenerateTasks.save_image[be4326fa-943f-4b3c-ac6e-418722305bba] received
[2024-04-19 15:04:30,651: INFO/MainProcess] Task captionGenerateTasks.save_image[ea0b15be-461e-41e1-bb20-cd15941ac933] received
[2024-04-19 15:04:30,914: INFO/MainProcess] Task captionGenerateTasks.generate_caption[6817f705-6852-40ad-bdfd-f8e016423a71] received
[2024-04-19 15:04:30,914: INFO/ForkPoolWorker-2] Task captionGenerateTasks.save_image[ea0b15be-461e-41e1-bb20-cd15941ac933] succeeded in 0.2628547279164195s: '/tmp/961891d0-f3a8-4d2a-98f6-95e66c21deea.jpg'
[2024-04-19 15:04:31,050: INFO/MainProcess] Task captionGenerateTasks.generate_caption[28fab593-5237-4800-8e19-b301f4c2f4d4] received
[2024-04-19 15:04:31,050: INFO/ForkPoolWorker-3] Task captionGenerateTasks.save_image[be4326fa-943f-4b3c-ac6e-418722305bba] succeeded in 0.3992004645988345s: '/tmp/7880ae28-6748-4d08-892e-ee08f10da514.jpg'
[2024-04-19 15:04:31,095: INFO/MainProcess] Task captionGenerateTasks.generate_caption[3246736b-cd64-4e4e-aafd-09050ee56db4] received
[2024-04-19 15:04:31,095: INFO/ForkPoolWorker-1] Task captionGenerateTasks.save_image[524ede47-bf41-41cf-9f6d-5392195bfd89] succeeded in 0.446143995039165s: '/tmp/315b9f66-9774-4bf5-afb1-bb8f6ada92cc.jpg'
[2024-04-19 15:04:37,290: INFO/ForkPoolWorker-1] Task captionGenerateTasks.generate_caption[3246736b-cd64-4e4e-aafd-09050ee56db4] succeeded in 6.194130159914494s: 'a woman sitting at a table'
[2024-04-19 15:04:37,358: WARNING/ForkPoolWorker-3] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/transformers/generation/utils.py:1141: UserWarning: Using the model-agnostic default `max_length` (=20) to control the generation length. We recommend setting `max_new_tokens` to control the maximum length of the generation.
  warnings.warn(

[2024-04-19 15:04:38,347: INFO/ForkPoolWorker-4] Task captionGenerateTasks.generate_caption[6817f705-6852-40ad-bdfd-f8e016423a71] succeeded in 7.432320741005242s: 'a group of people flying kites in the sky'
[2024-04-19 15:04:38,596: INFO/ForkPoolWorker-3] Task captionGenerateTasks.generate_caption[28fab593-5237-4800-8e19-b301f4c2f4d4] succeeded in 7.545054459013045s: 'two cell phones in a person\'s hand'
[2024-04-19 16:24:00,237: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/utils.py:203: CDeprecationWarning: 
    The 'CELERY_RESULT_BACKEND' setting is deprecated and scheduled for removal in
    version 6.0.0. Use the result_backend instead

  deprecated.warn(description=f'The {setting!r} setting',

[2024-04-19 16:24:00,237: WARNING/MainProcess] Please run `celery upgrade settings path/to/settings.py` to avoid these warnings and to allow a smoother upgrade to Celery 6.0.
[2024-04-19 16:24:00,354: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:24:00,357: INFO/MainProcess] Connected to redis://10.0.15.135:6379/0
[2024-04-19 16:24:00,357: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:24:00,359: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 16:24:01,365: INFO/MainProcess] mingle: all alone
[2024-04-19 16:24:01,371: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 16:35:52,194: INFO/MainProcess] Task app.fetch_and_process_image[deff7c67-bfba-43a2-b454-63ac44cd5d82] received
[2024-04-19 16:35:52,197: ERROR/ForkPoolWorker-1] Task app.fetch_and_process_image[deff7c67-bfba-43a2-b454-63ac44cd5d82] raised unexpected: TypeError('fetch_and_process_image() takes 1 positional argument but 2 were given')
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
TypeError: fetch_and_process_image() takes 1 positional argument but 2 were given
[2024-04-19 16:36:15,936: INFO/MainProcess] Task app.fetch_and_process_image[03e6182d-ce3c-4ee0-80e3-43bfc4fabdb0] received
[2024-04-19 16:36:15,937: ERROR/ForkPoolWorker-1] Task app.fetch_and_process_image[03e6182d-ce3c-4ee0-80e3-43bfc4fabdb0] raised unexpected: TypeError('fetch_and_process_image() takes 1 positional argument but 2 were given')
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
TypeError: fetch_and_process_image() takes 1 positional argument but 2 were given
[2024-04-19 16:43:57,403: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/utils.py:203: CDeprecationWarning: 
    The 'CELERY_RESULT_BACKEND' setting is deprecated and scheduled for removal in
    version 6.0.0. Use the result_backend instead

  deprecated.warn(description=f'The {setting!r} setting',

[2024-04-19 16:43:57,404: WARNING/MainProcess] Please run `celery upgrade settings path/to/settings.py` to avoid these warnings and to allow a smoother upgrade to Celery 6.0.
[2024-04-19 16:43:57,515: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:43:57,519: INFO/MainProcess] Connected to redis://10.0.15.135:6379/0
[2024-04-19 16:43:57,519: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:43:57,521: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 16:43:58,526: INFO/MainProcess] mingle: all alone
[2024-04-19 16:43:58,531: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 16:44:02,209: INFO/MainProcess] Task app.fetch_and_process_image[a64a604c-a1a7-45f4-868b-b6cc6d9949d1] received
[2024-04-19 16:44:02,929: ERROR/ForkPoolWorker-1] Task app.fetch_and_process_image[a64a604c-a1a7-45f4-868b-b6cc6d9949d1] raised unexpected: NameError("name 'processor' is not defined")
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 94, in fetch_and_process_image
    return process_image(s3_key)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/local.py", line 182, in __call__
    return self._get_current_object()(*a, **kw)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 737, in __protected_call__
    return orig(self, *args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 411, in __call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 114, in process_image
    inputs = processor(images=image, return_tensors="pt")
NameError: name 'processor' is not defined
[2024-04-19 16:48:26,227: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:48:26,231: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 16:48:26,231: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:48:26,233: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 16:48:27,239: INFO/MainProcess] mingle: all alone
[2024-04-19 16:48:27,245: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 16:51:49,816: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:51:49,820: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 16:51:49,821: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:51:49,822: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 16:51:50,827: INFO/MainProcess] mingle: all alone
[2024-04-19 16:51:50,834: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 16:54:05,836: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:54:05,840: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 16:54:05,841: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:54:05,843: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 16:54:06,848: INFO/MainProcess] mingle: all alone
[2024-04-19 16:54:06,854: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 16:54:31,003: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:54:31,006: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 16:54:31,007: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:54:31,008: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 16:54:32,013: INFO/MainProcess] mingle: all alone
[2024-04-19 16:54:32,020: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 16:55:36,129: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:55:36,133: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 16:55:36,133: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 16:55:36,135: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 16:55:37,141: INFO/MainProcess] mingle: all alone
[2024-04-19 16:55:37,146: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 16:57:51,004: INFO/MainProcess] Task app.fetch_and_process_image[50871e54-6763-43ea-81a1-ee067048b192] received
[2024-04-19 16:57:51,730: ERROR/ForkPoolWorker-1] Task app.fetch_and_process_image[50871e54-6763-43ea-81a1-ee067048b192] raised unexpected: NameError("name 'processor' is not defined")
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 92, in fetch_and_process_image
    return process_image(s3_key)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/local.py", line 182, in __call__
    return self._get_current_object()(*a, **kw)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 737, in __protected_call__
    return orig(self, *args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 411, in __call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 112, in process_image
    inputs = processor(images=image, return_tensors="pt")
NameError: name 'processor' is not defined
[2024-04-19 17:03:58,437: INFO/MainProcess] Task app.fetch_and_process_image[4d21cff0-1888-4fd3-a659-615e10b77b7a] received
[2024-04-19 17:03:58,989: ERROR/ForkPoolWorker-1] Task app.fetch_and_process_image[4d21cff0-1888-4fd3-a659-615e10b77b7a] raised unexpected: NameError("name 'processor' is not defined")
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 92, in fetch_and_process_image
    return process_image(s3_key)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/local.py", line 182, in __call__
    return self._get_current_object()(*a, **kw)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 737, in __protected_call__
    return orig(self, *args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 411, in __call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 112, in process_image
    inputs = processor(images=image, return_tensors="pt")
NameError: name 'processor' is not defined
[2024-04-19 17:21:38,067: DEBUG/MainProcess] | Worker: Preparing bootsteps.
[2024-04-19 17:21:38,068: DEBUG/MainProcess] | Worker: Building graph...
[2024-04-19 17:21:38,068: DEBUG/MainProcess] | Worker: New boot order: {StateDB, Beat, Timer, Hub, Pool, Autoscaler, Consumer}
[2024-04-19 17:21:38,070: DEBUG/MainProcess] | Consumer: Preparing bootsteps.
[2024-04-19 17:21:38,071: DEBUG/MainProcess] | Consumer: Building graph...
[2024-04-19 17:21:38,103: DEBUG/MainProcess] | Consumer: New boot order: {Connection, Events, Mingle, Gossip, Heart, Tasks, Control, Agent, event loop}
[2024-04-19 17:21:38,140: DEBUG/MainProcess] | Worker: Starting Hub
[2024-04-19 17:21:38,140: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:21:38,140: DEBUG/MainProcess] | Worker: Starting Pool
[2024-04-19 17:21:38,252: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:21:38,253: DEBUG/MainProcess] | Worker: Starting Consumer
[2024-04-19 17:21:38,253: DEBUG/MainProcess] | Consumer: Starting Connection
[2024-04-19 17:21:38,254: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 17:21:38,258: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 17:21:38,258: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:21:38,258: DEBUG/MainProcess] | Consumer: Starting Events
[2024-04-19 17:21:38,258: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 17:21:38,259: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:21:38,259: DEBUG/MainProcess] | Consumer: Starting Mingle
[2024-04-19 17:21:38,259: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 17:21:39,265: INFO/MainProcess] mingle: all alone
[2024-04-19 17:21:39,265: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:21:39,265: DEBUG/MainProcess] | Consumer: Starting Gossip
[2024-04-19 17:21:39,267: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:21:39,267: DEBUG/MainProcess] | Consumer: Starting Heart
[2024-04-19 17:21:39,268: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:21:39,268: DEBUG/MainProcess] | Consumer: Starting Tasks
[2024-04-19 17:21:39,270: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:21:39,270: DEBUG/MainProcess] | Consumer: Starting Control
[2024-04-19 17:21:39,271: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:21:39,271: DEBUG/MainProcess] | Consumer: Starting event loop
[2024-04-19 17:21:39,272: DEBUG/MainProcess] | Worker: Hub.register Pool...
[2024-04-19 17:21:39,272: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 17:21:39,272: DEBUG/MainProcess] basic.qos: prefetch_count->16
[2024-04-19 17:21:55,164: INFO/MainProcess] Task app.fetch_and_process_image[f63eaee8-43ae-43f7-9115-eedd77721fce] received
[2024-04-19 17:21:55,164: DEBUG/MainProcess] TaskPool: Apply <function fast_trace_task at 0x7f33a82e5550> (args:('app.fetch_and_process_image', 'f63eaee8-43ae-43f7-9115-eedd77721fce', {'lang': 'py', 'task': 'app.fetch_and_process_image', 'id': 'f63eaee8-43ae-43f7-9115-eedd77721fce', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': 'f63eaee8-43ae-43f7-9115-eedd77721fce', 'parent_id': None, 'argsrepr': "('http://images.cocodataset.org/unlabeled2017/000000369693.jpg',)", 'kwargsrepr': '{}', 'origin': 'gen1087685@ip-10-0-15-46.eu-west-2.compute.internal', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}, 'properties': {'correlation_id': 'f63eaee8-43ae-43f7-9115-eedd77721fce', 'reply_to': '773946b4-d75f-3a03-a490-9ba3d8ff90d3', 'delivery_mode': 2, 'delivery_info': {'exchange': '', 'routing_key': 'celery'}, 'priority': 0, 'body_encoding': 'base64', 'delivery_tag': 'eca0b3fe-c839-43aa-9717-4649f18a47d3'}, 'reply_to': '773946b4-d75f-3a03-a490-9ba3d8ff90d3', 'correlation_id':... kwargs:{})
[2024-04-19 17:21:55,167: DEBUG/ForkPoolWorker-1] Starting new HTTP connection (1): images.cocodataset.org:80
[2024-04-19 17:21:55,414: DEBUG/ForkPoolWorker-1] http://images.cocodataset.org:80 "GET /unlabeled2017/000000369693.jpg HTTP/1.1" 200 107587
[2024-04-19 17:21:55,635: DEBUG/ForkPoolWorker-1] Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
[2024-04-19 17:21:55,635: DEBUG/ForkPoolWorker-1] Using default client. pid: 1702327, thread: 139859876902720
[2024-04-19 17:21:55,636: DEBUG/ForkPoolWorker-1] Acquiring 0
[2024-04-19 17:21:55,636: DEBUG/ForkPoolWorker-1] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f33a83fa670>}) about to wait for the following futures []
[2024-04-19 17:21:55,636: DEBUG/ForkPoolWorker-1] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f33a83fa670>}) done waiting for dependent futures
[2024-04-19 17:21:55,637: DEBUG/ForkPoolWorker-1] Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f33a83fa670>}) with kwargs {'client': <botocore.client.S3 object at 0x7f33a6601f10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x7f33a8457b20>, 'osutil': <s3transfer.utils.OSUtils object at 0x7f33a8457a60>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x7f33a84649d0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f33a83fa670>}
[2024-04-19 17:21:55,637: DEBUG/ForkPoolWorker-1] Submitting task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '788084353a39dbc652c93e1058107f07.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x7f33a84649d0> for transfer request: 0.
[2024-04-19 17:21:55,637: DEBUG/ForkPoolWorker-1] Acquiring 0
[2024-04-19 17:21:55,637: DEBUG/ForkPoolWorker-1] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '788084353a39dbc652c93e1058107f07.jpg', 'extra_args': {}}) about to wait for the following futures []
[2024-04-19 17:21:55,637: DEBUG/ForkPoolWorker-1] Releasing acquire 0/None
[2024-04-19 17:21:55,637: DEBUG/ForkPoolWorker-1] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '788084353a39dbc652c93e1058107f07.jpg', 'extra_args': {}}) done waiting for dependent futures
[2024-04-19 17:21:55,637: DEBUG/ForkPoolWorker-1] Executing task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '788084353a39dbc652c93e1058107f07.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x7f33a6601f10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f33a83fac40>, 'bucket': 'comp0239-ucabrz5', 'key': '788084353a39dbc652c93e1058107f07.jpg', 'extra_args': {}}
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x7f33a6ef3280>
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x7f33a6f6e670>
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x7f33a6ef3b80>
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x7f33a6f6e5e0>
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7f33a6ef4430>
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7f33a63b8c40>>
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7f33a6e5c100>>
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x7f33a6f6e430>
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f33a6ef45e0>
[2024-04-19 17:21:55,638: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f33a63b8c40>>
[2024-04-19 17:21:55,639: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'us-east-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '788084353a39dbc652c93e1058107f07.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:21:55,639: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.amazonaws.com
[2024-04-19 17:21:55,640: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:21:55,640: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:21:55,640: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x7f33a708d790>
[2024-04-19 17:21:55,640: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x7f33a6f6e940>
[2024-04-19 17:21:55,640: DEBUG/ForkPoolWorker-1] Adding expect 100 continue header to request.
[2024-04-19 17:21:55,640: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7f33a63b8c70>>
[2024-04-19 17:21:55,641: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x7f33a6f6e0d0>
[2024-04-19 17:21:55,641: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x7f33a6ef3ca0>
[2024-04-19 17:21:55,641: DEBUG/ForkPoolWorker-1] Making request for OperationModel(name=PutObject) with params: {'url_path': '/788084353a39dbc652c93e1058107f07.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': 'eICENTo528ZSyT4QWBB/Bw==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x7f33a83fac40>, 'auth_path': '/comp0239-ucabrz5/788084353a39dbc652c93e1058107f07.jpg', 'url': 'https://comp0239-ucabrz5.s3.amazonaws.com/788084353a39dbc652c93e1058107f07.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7f33a6588340>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '788084353a39dbc652c93e1058107f07.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7f33a83fac40>}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '788084353a39dbc652c93e1058107f07.jpg'}, 'signing': {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'us-east-1'}]}}}
[2024-04-19 17:21:55,641: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7f33a650ab80>
[2024-04-19 17:21:55,641: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f33a65882e0>>
[2024-04-19 17:21:55,641: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f33a6e5c100>>
[2024-04-19 17:21:55,641: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7f33a6f6e310>
[2024-04-19 17:21:55,641: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7f33a6ef4550>
[2024-04-19 17:21:55,641: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7f33a63b8c70>>
[2024-04-19 17:21:55,642: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:21:55,642: DEBUG/ForkPoolWorker-1] CanonicalRequest:
PUT
/788084353a39dbc652c93e1058107f07.jpg

content-md5:eICENTo528ZSyT4QWBB/Bw==
host:comp0239-ucabrz5.s3.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T172155Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 17:21:55,642: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T172155Z
20240419/us-east-1/s3/aws4_request
941766f19a59ad774ea662e716d9a1a58bbb9f4065229875aa4a0997045bc155
[2024-04-19 17:21:55,642: DEBUG/ForkPoolWorker-1] Signature:
edc1970bfb81b1baed67afbd1754075afc7e4da00d690a6ad8ca8be388f2af10
[2024-04-19 17:21:55,642: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7f33a650ac10>
[2024-04-19 17:21:55,642: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7f33a6ef43a0>
[2024-04-19 17:21:55,642: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.amazonaws.com/788084353a39dbc652c93e1058107f07.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'eICENTo528ZSyT4QWBB/Bw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T172155Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/us-east-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=edc1970bfb81b1baed67afbd1754075afc7e4da00d690a6ad8ca8be388f2af10', 'amz-sdk-invocation-id': b'98018edd-b452-4a9c-ab15-2aedb7e32a86', 'amz-sdk-request': b'attempt=1', 'Content-Length': '107587'}>
[2024-04-19 17:21:55,642: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:21:55,643: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.amazonaws.com:443
[2024-04-19 17:21:55,669: DEBUG/ForkPoolWorker-1] Waiting for 100 Continue response.
[2024-04-19 17:21:55,671: DEBUG/ForkPoolWorker-1] Received a non 100 Continue response from the server, NOT sending request body.
[2024-04-19 17:21:55,671: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.amazonaws.com:443 "PUT /788084353a39dbc652c93e1058107f07.jpg HTTP/1.1" 400 None
[2024-04-19 17:21:55,672: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-request-id': 'CSMPRGY6QBYTZMH6', 'x-amz-id-2': 'OD9Gn9odtyPzlFBj2POmYzuS+zCqQHYp/qARiiPtKah7uaX8OS+jeeoXIXHAWUtdWvxFJUkU2c4=', 'Content-Type': 'application/xml', 'Transfer-Encoding': 'chunked', 'Date': 'Fri, 19 Apr 2024 17:21:55 GMT', 'Server': 'AmazonS3', 'Connection': 'close'}
[2024-04-19 17:21:55,672: DEBUG/ForkPoolWorker-1] Response body:
b'<?xml version="1.0" encoding="UTF-8"?>\n<Error><Code>AuthorizationHeaderMalformed</Code><Message>The authorization header is malformed; the region \'us-east-1\' is wrong; expecting \'eu-west-2\'</Message><Region>eu-west-2</Region><RequestId>CSMPRGY6QBYTZMH6</RequestId><HostId>OD9Gn9odtyPzlFBj2POmYzuS+zCqQHYp/qARiiPtKah7uaX8OS+jeeoXIXHAWUtdWvxFJUkU2c4=</HostId></Error>'
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f33a63b8b80>
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f33a63b8c40>>
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] S3 client configured for region us-east-1 but the bucket comp0239-ucabrz5 is in region eu-west-2; Please configure the proper region to avoid multiple unnecessary redirects and signing attempts.
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f33a6ef45e0>
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f33a63b8c40>>
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '788084353a39dbc652c93e1058107f07.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] Updating URI from https://comp0239-ucabrz5.s3.amazonaws.com/788084353a39dbc652c93e1058107f07.jpg to https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/788084353a39dbc652c93e1058107f07.jpg
[2024-04-19 17:21:55,674: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:21:55,675: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:21:55,675: DEBUG/ForkPoolWorker-1] Response received to retry, sleeping for 0 seconds
[2024-04-19 17:21:55,675: DEBUG/ForkPoolWorker-1] Rewinding stream: <s3transfer.utils.ReadFileChunk object at 0x7f33a83fac40>
[2024-04-19 17:21:55,675: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7f33a650ab80>
[2024-04-19 17:21:55,675: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f33a65882e0>>
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f33a6e5c100>>
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7f33a6f6e310>
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7f33a6ef4550>
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7f33a63b8c70>>
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] CanonicalRequest:
PUT
/788084353a39dbc652c93e1058107f07.jpg

content-md5:eICENTo528ZSyT4QWBB/Bw==
host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T172155Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T172155Z
20240419/eu-west-2/s3/aws4_request
e388ee87f1e1410f5e5a6c9f1d45199ad17492b6eb0653f71f683f11e46cb42c
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Signature:
4c9ab0e851f8fd73b0f9411d01fac4edc01424fd26c763ac5f517470e384cf5c
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7f33a650ac10>
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7f33a6ef43a0>
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/788084353a39dbc652c93e1058107f07.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'eICENTo528ZSyT4QWBB/Bw==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T172155Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/eu-west-2/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=4c9ab0e851f8fd73b0f9411d01fac4edc01424fd26c763ac5f517470e384cf5c', 'amz-sdk-invocation-id': b'98018edd-b452-4a9c-ab15-2aedb7e32a86', 'amz-sdk-request': b'ttl=20240419T172255Z; attempt=2; max=5', 'Content-Length': '107587'}>
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:21:55,676: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443
[2024-04-19 17:21:55,704: DEBUG/ForkPoolWorker-1] Waiting for 100 Continue response.
[2024-04-19 17:21:55,731: DEBUG/ForkPoolWorker-1] 100 Continue response seen, now sending request body.
[2024-04-19 17:21:55,773: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "PUT /788084353a39dbc652c93e1058107f07.jpg HTTP/1.1" 200 0
[2024-04-19 17:21:55,774: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-id-2': 'rb6fbpOS+8rG1zznBE9NWN7xWa7LDP8OCvowGyIGP0e+WeovUgiTlP5Ctou6g7Me3aEAL2x8+r0=', 'x-amz-request-id': 'CSMJB6VY8PDZ3QJA', 'Date': 'Fri, 19 Apr 2024 17:21:56 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"788084353a39dbc652c93e1058107f07"', 'Server': 'AmazonS3', 'Content-Length': '0'}
[2024-04-19 17:21:55,774: DEBUG/ForkPoolWorker-1] Response body:
b''
[2024-04-19 17:21:55,774: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f33a63b8b80>
[2024-04-19 17:21:55,774: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:21:55,774: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f33a63b8c40>>
[2024-04-19 17:21:55,774: DEBUG/ForkPoolWorker-1] S3 request was previously redirected, not redirecting.
[2024-04-19 17:21:55,774: DEBUG/ForkPoolWorker-1] Releasing acquire 0/None
[2024-04-19 17:21:55,774: INFO/ForkPoolWorker-1] app.process_image[None]: Processing image with key: 788084353a39dbc652c93e1058107f07.jpg
[2024-04-19 17:21:55,774: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function sse_md5 at 0x7f33a6f6e670>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function validate_bucket_name at 0x7f33a6f6e5e0>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7f33a6ef4430>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7f33a63b8c40>>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7f33a6e5c100>>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function generate_idempotent_uuid at 0x7f33a6f6e430>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f33a6ef45e0>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f33a63b8c40>>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '788084353a39dbc652c93e1058107f07.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function add_expect_header at 0x7f33a6f6e940>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7f33a63b8c70>>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function add_recursion_detection_header at 0x7f33a6f6e0d0>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function inject_api_version_header_if_needed at 0x7f33a6ef3ca0>
[2024-04-19 17:21:55,775: DEBUG/ForkPoolWorker-1] Making request for OperationModel(name=GetObject) with params: {'url_path': '/788084353a39dbc652c93e1058107f07.jpg', 'query_string': {}, 'method': 'GET', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87'}, 'body': b'', 'auth_path': '/comp0239-ucabrz5/788084353a39dbc652c93e1058107f07.jpg', 'url': 'https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/788084353a39dbc652c93e1058107f07.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7f33a6588340>, 'has_streaming_input': False, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '788084353a39dbc652c93e1058107f07.jpg'}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '788084353a39dbc652c93e1058107f07.jpg'}, 'signing': {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-west-2'}]}}}
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function signal_not_transferring at 0x7f33a650ab80>
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f33a65882e0>>
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.GetObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f33a6e5c100>>
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.GetObject: calling handler <function set_operation_specific_signer at 0x7f33a6f6e310>
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] Event before-sign.s3.GetObject: calling handler <function remove_arn_from_signing_path at 0x7f33a6ef4550>
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] Event before-sign.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7f33a63b8c70>>
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] CanonicalRequest:
GET
/788084353a39dbc652c93e1058107f07.jpg

host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:20240419T172155Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T172155Z
20240419/eu-west-2/s3/aws4_request
13fa88a6342bab98b4bcd0cafd52129325b6af909b828e43bec21888f5a47df0
[2024-04-19 17:21:55,776: DEBUG/ForkPoolWorker-1] Signature:
8a5f5d3e0f09851048d3e096b09cc1d060f15c643fa2bc44bf8024a4d7b4ca6c
[2024-04-19 17:21:55,777: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function signal_transferring at 0x7f33a650ac10>
[2024-04-19 17:21:55,777: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function add_retry_headers at 0x7f33a6ef43a0>
[2024-04-19 17:21:55,777: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=True, method=GET, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/788084353a39dbc652c93e1058107f07.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'X-Amz-Date': b'20240419T172155Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/eu-west-2/s3/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=8a5f5d3e0f09851048d3e096b09cc1d060f15c643fa2bc44bf8024a4d7b4ca6c', 'amz-sdk-invocation-id': b'3ee06334-f529-4069-83b9-0c4e9a3eb5ea', 'amz-sdk-request': b'attempt=1'}>
[2024-04-19 17:21:55,777: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:21:55,793: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "GET /788084353a39dbc652c93e1058107f07.jpg HTTP/1.1" 200 107587
[2024-04-19 17:21:55,793: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-id-2': 'FrKk9/+5WG46u9ANC3RpcrS7caTIFMTPkBKLF1rlRDLNFdANFBnl9sfQBE6qbNgpjWtw+IlSSJg=', 'x-amz-request-id': 'CSMM8C9Z15QN9S16', 'Date': 'Fri, 19 Apr 2024 17:21:56 GMT', 'Last-Modified': 'Fri, 19 Apr 2024 17:21:56 GMT', 'ETag': '"788084353a39dbc652c93e1058107f07"', 'x-amz-server-side-encryption': 'AES256', 'Accept-Ranges': 'bytes', 'Content-Type': 'binary/octet-stream', 'Server': 'AmazonS3', 'Content-Length': '107587'}
[2024-04-19 17:21:55,793: DEBUG/ForkPoolWorker-1] Response body:
<botocore.response.StreamingBody object at 0x7f33a840bc40>
[2024-04-19 17:21:55,794: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.GetObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f33a63b8b80>
[2024-04-19 17:21:55,794: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:21:55,794: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f33a63b8c40>>
[2024-04-19 17:21:55,806: ERROR/ForkPoolWorker-1] Task app.fetch_and_process_image[f63eaee8-43ae-43f7-9115-eedd77721fce] raised unexpected: NameError("name 'processor' is not defined")
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 92, in fetch_and_process_image
    return process_image(s3_key)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/local.py", line 182, in __call__
    return self._get_current_object()(*a, **kw)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 737, in __protected_call__
    return orig(self, *args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 411, in __call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 113, in process_image
    if processor is None or model is None:
NameError: name 'processor' is not defined
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Worker: Closing Hub...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Worker: Closing Pool...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Worker: Closing Consumer...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Worker: Stopping Consumer...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Closing Connection...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Closing Events...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Closing Mingle...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Closing Gossip...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Closing Heart...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Closing Tasks...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Closing Control...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Closing event loop...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Stopping event loop...
[2024-04-19 17:23:21,323: DEBUG/MainProcess] | Consumer: Stopping Control...
[2024-04-19 17:23:21,325: DEBUG/MainProcess] | Consumer: Stopping Tasks...
[2024-04-19 17:23:21,325: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 17:23:21,325: DEBUG/MainProcess] | Consumer: Stopping Heart...
[2024-04-19 17:23:21,325: DEBUG/MainProcess] | Consumer: Stopping Gossip...
[2024-04-19 17:23:21,326: DEBUG/MainProcess] | Consumer: Stopping Mingle...
[2024-04-19 17:23:21,326: DEBUG/MainProcess] | Consumer: Stopping Events...
[2024-04-19 17:23:21,326: DEBUG/MainProcess] | Consumer: Stopping Connection...
[2024-04-19 17:23:21,326: DEBUG/MainProcess] | Worker: Stopping Pool...
[2024-04-19 17:23:22,334: DEBUG/MainProcess] | Worker: Stopping Hub...
[2024-04-19 17:23:22,334: DEBUG/MainProcess] | Consumer: Shutdown Control...
[2024-04-19 17:23:22,334: DEBUG/MainProcess] | Consumer: Shutdown Tasks...
[2024-04-19 17:23:22,334: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 17:23:22,334: DEBUG/MainProcess] Closing consumer channel...
[2024-04-19 17:23:22,334: DEBUG/MainProcess] | Consumer: Shutdown Heart...
[2024-04-19 17:23:22,334: DEBUG/MainProcess] | Consumer: Shutdown Gossip...
[2024-04-19 17:23:22,334: DEBUG/MainProcess] | Consumer: Shutdown Events...
[2024-04-19 17:23:22,334: DEBUG/MainProcess] | Consumer: Shutdown Connection...
[2024-04-19 17:23:22,335: DEBUG/MainProcess] removing tasks from inqueue until task handler finished
[2024-04-19 17:23:30,949: DEBUG/MainProcess] | Worker: Preparing bootsteps.
[2024-04-19 17:23:30,950: DEBUG/MainProcess] | Worker: Building graph...
[2024-04-19 17:23:30,950: DEBUG/MainProcess] | Worker: New boot order: {Timer, Hub, Pool, Autoscaler, Beat, StateDB, Consumer}
[2024-04-19 17:23:30,952: DEBUG/MainProcess] | Consumer: Preparing bootsteps.
[2024-04-19 17:23:30,953: DEBUG/MainProcess] | Consumer: Building graph...
[2024-04-19 17:23:30,985: DEBUG/MainProcess] | Consumer: New boot order: {Connection, Events, Heart, Agent, Mingle, Gossip, Tasks, Control, event loop}
[2024-04-19 17:23:31,021: DEBUG/MainProcess] | Worker: Starting Hub
[2024-04-19 17:23:31,021: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:23:31,021: DEBUG/MainProcess] | Worker: Starting Pool
[2024-04-19 17:23:31,135: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:23:31,135: DEBUG/MainProcess] | Worker: Starting Consumer
[2024-04-19 17:23:31,135: DEBUG/MainProcess] | Consumer: Starting Connection
[2024-04-19 17:23:31,136: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 17:23:31,139: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 17:23:31,139: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:23:31,139: DEBUG/MainProcess] | Consumer: Starting Events
[2024-04-19 17:23:31,140: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 17:23:31,141: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:23:31,141: DEBUG/MainProcess] | Consumer: Starting Heart
[2024-04-19 17:23:31,142: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:23:31,142: DEBUG/MainProcess] | Consumer: Starting Mingle
[2024-04-19 17:23:31,142: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 17:23:32,147: INFO/MainProcess] mingle: all alone
[2024-04-19 17:23:32,148: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:23:32,148: DEBUG/MainProcess] | Consumer: Starting Gossip
[2024-04-19 17:23:32,150: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:23:32,150: DEBUG/MainProcess] | Consumer: Starting Tasks
[2024-04-19 17:23:32,151: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:23:32,151: DEBUG/MainProcess] | Consumer: Starting Control
[2024-04-19 17:23:32,153: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:23:32,153: DEBUG/MainProcess] | Consumer: Starting event loop
[2024-04-19 17:23:32,153: DEBUG/MainProcess] | Worker: Hub.register Pool...
[2024-04-19 17:23:32,154: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 17:23:32,154: DEBUG/MainProcess] basic.qos: prefetch_count->16
[2024-04-19 17:23:53,056: INFO/MainProcess] Task app.fetch_and_process_image[4a55973e-cd09-4e8c-8ad7-3aa2ee5f7304] received
[2024-04-19 17:23:53,057: DEBUG/MainProcess] TaskPool: Apply <function fast_trace_task at 0x7f3671f22550> (args:('app.fetch_and_process_image', '4a55973e-cd09-4e8c-8ad7-3aa2ee5f7304', {'lang': 'py', 'task': 'app.fetch_and_process_image', 'id': '4a55973e-cd09-4e8c-8ad7-3aa2ee5f7304', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': '4a55973e-cd09-4e8c-8ad7-3aa2ee5f7304', 'parent_id': None, 'argsrepr': "('http://images.cocodataset.org/unlabeled2017/000000369694.jpg',)", 'kwargsrepr': '{}', 'origin': 'gen1088164@ip-10-0-15-46.eu-west-2.compute.internal', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}, 'properties': {'correlation_id': '4a55973e-cd09-4e8c-8ad7-3aa2ee5f7304', 'reply_to': '641abdca-101f-3f9a-9e88-b5afeb361b50', 'delivery_mode': 2, 'delivery_info': {'exchange': '', 'routing_key': 'celery'}, 'priority': 0, 'body_encoding': 'base64', 'delivery_tag': '7d889f23-9f36-4d53-9ea7-0e08299c13a2'}, 'reply_to': '641abdca-101f-3f9a-9e88-b5afeb361b50', 'correlation_id':... kwargs:{})
[2024-04-19 17:23:53,059: DEBUG/ForkPoolWorker-1] Starting new HTTP connection (1): images.cocodataset.org:80
[2024-04-19 17:23:53,301: DEBUG/ForkPoolWorker-1] http://images.cocodataset.org:80 "GET /unlabeled2017/000000369694.jpg HTTP/1.1" 200 142969
[2024-04-19 17:23:53,526: DEBUG/ForkPoolWorker-1] Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
[2024-04-19 17:23:53,526: DEBUG/ForkPoolWorker-1] Using default client. pid: 1702653, thread: 139871852808000
[2024-04-19 17:23:53,527: DEBUG/ForkPoolWorker-1] Acquiring 0
[2024-04-19 17:23:53,527: DEBUG/ForkPoolWorker-1] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f3672037670>}) about to wait for the following futures []
[2024-04-19 17:23:53,527: DEBUG/ForkPoolWorker-1] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f3672037670>}) done waiting for dependent futures
[2024-04-19 17:23:53,527: DEBUG/ForkPoolWorker-1] Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f3672037670>}) with kwargs {'client': <botocore.client.S3 object at 0x7f3670239f10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x7f3672096b20>, 'osutil': <s3transfer.utils.OSUtils object at 0x7f3672096a60>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x7f36720a19d0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f3672037670>}
[2024-04-19 17:23:53,527: DEBUG/ForkPoolWorker-1] Submitting task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x7f36720a19d0> for transfer request: 0.
[2024-04-19 17:23:53,527: DEBUG/ForkPoolWorker-1] Acquiring 0
[2024-04-19 17:23:53,528: DEBUG/ForkPoolWorker-1] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) about to wait for the following futures []
[2024-04-19 17:23:53,528: DEBUG/ForkPoolWorker-1] Releasing acquire 0/None
[2024-04-19 17:23:53,528: DEBUG/ForkPoolWorker-1] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) done waiting for dependent futures
[2024-04-19 17:23:53,528: DEBUG/ForkPoolWorker-1] Executing task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x7f3670239f10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f3672037c40>, 'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x7f3670b2a280>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x7f3670ba6670>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x7f3670b2ab80>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x7f3670ba65e0>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7f3670b2b430>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7f366fff1c40>>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7f3670a92100>>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x7f3670ba6430>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f3670b2b5e0>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f366fff1c40>>
[2024-04-19 17:23:53,529: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'us-east-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:23:53,530: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.amazonaws.com
[2024-04-19 17:23:53,530: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:23:53,530: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:23:53,530: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x7f3670cba790>
[2024-04-19 17:23:53,531: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x7f3670ba6940>
[2024-04-19 17:23:53,531: DEBUG/ForkPoolWorker-1] Adding expect 100 continue header to request.
[2024-04-19 17:23:53,531: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7f366fff1c70>>
[2024-04-19 17:23:53,531: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x7f3670ba60d0>
[2024-04-19 17:23:53,531: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x7f3670b2aca0>
[2024-04-19 17:23:53,531: DEBUG/ForkPoolWorker-1] Making request for OperationModel(name=PutObject) with params: {'url_path': '/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': 'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x7f3672037c40>, 'auth_path': '/comp0239-ucabrz5/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'url': 'https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7f36701bf340>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7f3672037c40>}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}, 'signing': {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'us-east-1'}]}}}
[2024-04-19 17:23:53,531: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7f3670141b80>
[2024-04-19 17:23:53,531: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f36701bf2e0>>
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f3670a92100>>
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7f3670ba6310>
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7f3670b2b550>
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7f366fff1c70>>
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] CanonicalRequest:
PUT
/54ae161caf12eb6bc208836b44ed8f0d.jpg

content-md5:VK4WHK8S62vCCINrRO2PDQ==
host:comp0239-ucabrz5.s3.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T172353Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T172353Z
20240419/us-east-1/s3/aws4_request
7fbbf1987466971edb124eb503238b6d990aa0e103cd69f7bc88ca8436967a5a
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] Signature:
821ca20df66ee15abbdeaa71a5bd1e6164b92d891ab1aa8574a5671dbc6a718c
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7f3670141c10>
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7f3670b2b3a0>
[2024-04-19 17:23:53,532: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T172353Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/us-east-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=821ca20df66ee15abbdeaa71a5bd1e6164b92d891ab1aa8574a5671dbc6a718c', 'amz-sdk-invocation-id': b'8ae7e50e-9fb6-4cb7-b117-6600abece519', 'amz-sdk-request': b'attempt=1', 'Content-Length': '142969'}>
[2024-04-19 17:23:53,533: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:23:53,533: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.amazonaws.com:443
[2024-04-19 17:23:53,558: DEBUG/ForkPoolWorker-1] Waiting for 100 Continue response.
[2024-04-19 17:23:53,562: DEBUG/ForkPoolWorker-1] Received a non 100 Continue response from the server, NOT sending request body.
[2024-04-19 17:23:53,562: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.amazonaws.com:443 "PUT /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 400 None
[2024-04-19 17:23:53,562: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-request-id': 'XEPE2797QR06MV2D', 'x-amz-id-2': 'i0c/CtCgK5uaIo+3GCeDax6AnMoZloTLnMfGdHscTnu3zJrkc/+txZuZFv5UnA9wSnSa3lpmLWA=', 'Content-Type': 'application/xml', 'Transfer-Encoding': 'chunked', 'Date': 'Fri, 19 Apr 2024 17:23:53 GMT', 'Server': 'AmazonS3', 'Connection': 'close'}
[2024-04-19 17:23:53,562: DEBUG/ForkPoolWorker-1] Response body:
b'<?xml version="1.0" encoding="UTF-8"?>\n<Error><Code>AuthorizationHeaderMalformed</Code><Message>The authorization header is malformed; the region \'us-east-1\' is wrong; expecting \'eu-west-2\'</Message><Region>eu-west-2</Region><RequestId>XEPE2797QR06MV2D</RequestId><HostId>i0c/CtCgK5uaIo+3GCeDax6AnMoZloTLnMfGdHscTnu3zJrkc/+txZuZFv5UnA9wSnSa3lpmLWA=</HostId></Error>'
[2024-04-19 17:23:53,564: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f366fff1b80>
[2024-04-19 17:23:53,564: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:23:53,564: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f366fff1c40>>
[2024-04-19 17:23:53,565: DEBUG/ForkPoolWorker-1] S3 client configured for region us-east-1 but the bucket comp0239-ucabrz5 is in region eu-west-2; Please configure the proper region to avoid multiple unnecessary redirects and signing attempts.
[2024-04-19 17:23:53,565: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f3670b2b5e0>
[2024-04-19 17:23:53,565: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f366fff1c40>>
[2024-04-19 17:23:53,565: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:23:53,565: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 17:23:53,565: DEBUG/ForkPoolWorker-1] Updating URI from https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg to https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg
[2024-04-19 17:23:53,565: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:23:53,565: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:23:53,565: DEBUG/ForkPoolWorker-1] Response received to retry, sleeping for 0 seconds
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] Rewinding stream: <s3transfer.utils.ReadFileChunk object at 0x7f3672037c40>
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7f3670141b80>
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f36701bf2e0>>
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f3670a92100>>
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7f3670ba6310>
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7f3670b2b550>
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7f366fff1c70>>
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] CanonicalRequest:
PUT
/54ae161caf12eb6bc208836b44ed8f0d.jpg

content-md5:VK4WHK8S62vCCINrRO2PDQ==
host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T172353Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 17:23:53,566: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T172353Z
20240419/eu-west-2/s3/aws4_request
ac5d02bc93e0a4fa146a48cb8cb0a69bd724909b21bfc463cfc07fd96e474331
[2024-04-19 17:23:53,567: DEBUG/ForkPoolWorker-1] Signature:
65b7f00efe6d73aec6ba09059caf0370c541f82243c61875db3f350f8cb58b98
[2024-04-19 17:23:53,567: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7f3670141c10>
[2024-04-19 17:23:53,567: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7f3670b2b3a0>
[2024-04-19 17:23:53,567: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T172353Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/eu-west-2/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=65b7f00efe6d73aec6ba09059caf0370c541f82243c61875db3f350f8cb58b98', 'amz-sdk-invocation-id': b'8ae7e50e-9fb6-4cb7-b117-6600abece519', 'amz-sdk-request': b'ttl=20240419T172453Z; attempt=2; max=5', 'Content-Length': '142969'}>
[2024-04-19 17:23:53,567: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:23:53,567: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443
[2024-04-19 17:23:53,593: DEBUG/ForkPoolWorker-1] Waiting for 100 Continue response.
[2024-04-19 17:23:53,620: DEBUG/ForkPoolWorker-1] 100 Continue response seen, now sending request body.
[2024-04-19 17:23:53,668: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "PUT /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 200 0
[2024-04-19 17:23:53,668: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-id-2': 'Tg6xJ6/Dva2HdhQRY3oO7sxh9HBG5RvbXj3X70f26wp/knKAgf9JXyJk8OvZYUq+v7rRWvk/DH0=', 'x-amz-request-id': 'XEP3PEYQ134PBWWR', 'Date': 'Fri, 19 Apr 2024 17:23:54 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"54ae161caf12eb6bc208836b44ed8f0d"', 'Server': 'AmazonS3', 'Content-Length': '0'}
[2024-04-19 17:23:53,668: DEBUG/ForkPoolWorker-1] Response body:
b''
[2024-04-19 17:23:53,668: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f366fff1b80>
[2024-04-19 17:23:53,668: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:23:53,668: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f366fff1c40>>
[2024-04-19 17:23:53,668: DEBUG/ForkPoolWorker-1] S3 request was previously redirected, not redirecting.
[2024-04-19 17:23:53,668: DEBUG/ForkPoolWorker-1] Releasing acquire 0/None
[2024-04-19 17:23:53,669: INFO/ForkPoolWorker-1] app.process_image[None]: Processing image with key: 54ae161caf12eb6bc208836b44ed8f0d.jpg
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function sse_md5 at 0x7f3670ba6670>
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function validate_bucket_name at 0x7f3670ba65e0>
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7f3670b2b430>
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7f366fff1c40>>
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7f3670a92100>>
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function generate_idempotent_uuid at 0x7f3670ba6430>
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f3670b2b5e0>
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f366fff1c40>>
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:23:53,669: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function add_expect_header at 0x7f3670ba6940>
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7f366fff1c70>>
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function add_recursion_detection_header at 0x7f3670ba60d0>
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function inject_api_version_header_if_needed at 0x7f3670b2aca0>
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Making request for OperationModel(name=GetObject) with params: {'url_path': '/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'query_string': {}, 'method': 'GET', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87'}, 'body': b'', 'auth_path': '/comp0239-ucabrz5/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'url': 'https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7f36701bf340>, 'has_streaming_input': False, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}, 'signing': {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-west-2'}]}}}
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function signal_not_transferring at 0x7f3670141b80>
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f36701bf2e0>>
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.GetObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f3670a92100>>
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.GetObject: calling handler <function set_operation_specific_signer at 0x7f3670ba6310>
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event before-sign.s3.GetObject: calling handler <function remove_arn_from_signing_path at 0x7f3670b2b550>
[2024-04-19 17:23:53,670: DEBUG/ForkPoolWorker-1] Event before-sign.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7f366fff1c70>>
[2024-04-19 17:23:53,671: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:23:53,671: DEBUG/ForkPoolWorker-1] CanonicalRequest:
GET
/54ae161caf12eb6bc208836b44ed8f0d.jpg

host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:20240419T172353Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
[2024-04-19 17:23:53,671: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T172353Z
20240419/eu-west-2/s3/aws4_request
76d54cc2f7c1008c60377bb69f34a6ae1f179c28bbec2ff6cd450a0b7a9887fc
[2024-04-19 17:23:53,671: DEBUG/ForkPoolWorker-1] Signature:
7602f484576df9e96488fe6f0f9131df9f703dfa9557f0c33e683afdda9a9b28
[2024-04-19 17:23:53,671: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function signal_transferring at 0x7f3670141c10>
[2024-04-19 17:23:53,671: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function add_retry_headers at 0x7f3670b2b3a0>
[2024-04-19 17:23:53,671: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=True, method=GET, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'X-Amz-Date': b'20240419T172353Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/eu-west-2/s3/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=7602f484576df9e96488fe6f0f9131df9f703dfa9557f0c33e683afdda9a9b28', 'amz-sdk-invocation-id': b'b4ecb7f9-dcc9-452a-949c-6bee3a97556d', 'amz-sdk-request': b'attempt=1'}>
[2024-04-19 17:23:53,671: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:23:53,687: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "GET /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 200 142969
[2024-04-19 17:23:53,687: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-id-2': 'WLjGqRsvzh5UXpQ02bcyFPSpdm82g2lzjuGvvScVvj77Ao46x+OwuSrwApCcfRWEtwKmW986FkU=', 'x-amz-request-id': 'XEPAA541PEWKY39X', 'Date': 'Fri, 19 Apr 2024 17:23:54 GMT', 'Last-Modified': 'Fri, 19 Apr 2024 17:23:54 GMT', 'ETag': '"54ae161caf12eb6bc208836b44ed8f0d"', 'x-amz-server-side-encryption': 'AES256', 'Accept-Ranges': 'bytes', 'Content-Type': 'binary/octet-stream', 'Server': 'AmazonS3', 'Content-Length': '142969'}
[2024-04-19 17:23:53,687: DEBUG/ForkPoolWorker-1] Response body:
<botocore.response.StreamingBody object at 0x7f3672049c40>
[2024-04-19 17:23:53,687: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.GetObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f366fff1b80>
[2024-04-19 17:23:53,687: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:23:53,687: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f366fff1c40>>
[2024-04-19 17:23:53,699: ERROR/ForkPoolWorker-1] Task app.fetch_and_process_image[4a55973e-cd09-4e8c-8ad7-3aa2ee5f7304] raised unexpected: NameError("name 'processor' is not defined")
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 92, in fetch_and_process_image
    return process_image(s3_key)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/local.py", line 182, in __call__
    return self._get_current_object()(*a, **kw)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 737, in __protected_call__
    return orig(self, *args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 411, in __call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 113, in process_image
    if processor is None or model is None:
NameError: name 'processor' is not defined
[2024-04-19 17:29:15,440: DEBUG/MainProcess] | Worker: Closing Hub...
[2024-04-19 17:29:15,440: DEBUG/MainProcess] | Worker: Closing Pool...
[2024-04-19 17:29:15,440: DEBUG/MainProcess] | Worker: Closing Consumer...
[2024-04-19 17:29:15,440: DEBUG/MainProcess] | Worker: Stopping Consumer...
[2024-04-19 17:29:15,440: DEBUG/MainProcess] | Consumer: Closing Connection...
[2024-04-19 17:29:15,440: DEBUG/MainProcess] | Consumer: Closing Events...
[2024-04-19 17:29:15,440: DEBUG/MainProcess] | Consumer: Closing Heart...
[2024-04-19 17:29:15,440: DEBUG/MainProcess] | Consumer: Closing Mingle...
[2024-04-19 17:29:15,441: DEBUG/MainProcess] | Consumer: Closing Gossip...
[2024-04-19 17:29:15,441: DEBUG/MainProcess] | Consumer: Closing Tasks...
[2024-04-19 17:29:15,441: DEBUG/MainProcess] | Consumer: Closing Control...
[2024-04-19 17:29:15,441: DEBUG/MainProcess] | Consumer: Closing event loop...
[2024-04-19 17:29:15,441: DEBUG/MainProcess] | Consumer: Stopping event loop...
[2024-04-19 17:29:15,441: DEBUG/MainProcess] | Consumer: Stopping Control...
[2024-04-19 17:29:15,442: DEBUG/MainProcess] | Consumer: Stopping Tasks...
[2024-04-19 17:29:15,442: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 17:29:15,442: DEBUG/MainProcess] | Consumer: Stopping Gossip...
[2024-04-19 17:29:15,443: DEBUG/MainProcess] | Consumer: Stopping Mingle...
[2024-04-19 17:29:15,443: DEBUG/MainProcess] | Consumer: Stopping Heart...
[2024-04-19 17:29:15,443: DEBUG/MainProcess] | Consumer: Stopping Events...
[2024-04-19 17:29:15,443: DEBUG/MainProcess] | Consumer: Stopping Connection...
[2024-04-19 17:29:15,443: DEBUG/MainProcess] | Worker: Stopping Pool...
[2024-04-19 17:29:16,450: DEBUG/MainProcess] | Worker: Stopping Hub...
[2024-04-19 17:29:16,450: DEBUG/MainProcess] | Consumer: Shutdown Control...
[2024-04-19 17:29:16,450: DEBUG/MainProcess] | Consumer: Shutdown Tasks...
[2024-04-19 17:29:16,450: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 17:29:16,450: DEBUG/MainProcess] Closing consumer channel...
[2024-04-19 17:29:16,450: DEBUG/MainProcess] | Consumer: Shutdown Gossip...
[2024-04-19 17:29:16,450: DEBUG/MainProcess] | Consumer: Shutdown Heart...
[2024-04-19 17:29:16,450: DEBUG/MainProcess] | Consumer: Shutdown Events...
[2024-04-19 17:29:16,450: DEBUG/MainProcess] | Consumer: Shutdown Connection...
[2024-04-19 17:29:16,451: DEBUG/MainProcess] removing tasks from inqueue until task handler finished
[2024-04-19 17:29:35,567: DEBUG/MainProcess] | Worker: Preparing bootsteps.
[2024-04-19 17:29:35,567: DEBUG/MainProcess] | Worker: Building graph...
[2024-04-19 17:29:35,568: DEBUG/MainProcess] | Worker: New boot order: {StateDB, Timer, Hub, Pool, Autoscaler, Beat, Consumer}
[2024-04-19 17:29:35,570: DEBUG/MainProcess] | Consumer: Preparing bootsteps.
[2024-04-19 17:29:35,570: DEBUG/MainProcess] | Consumer: Building graph...
[2024-04-19 17:29:35,603: DEBUG/MainProcess] | Consumer: New boot order: {Connection, Events, Heart, Mingle, Tasks, Control, Agent, Gossip, event loop}
[2024-04-19 17:29:35,639: DEBUG/MainProcess] | Worker: Starting Hub
[2024-04-19 17:29:35,639: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:29:35,639: DEBUG/MainProcess] | Worker: Starting Pool
[2024-04-19 17:29:35,750: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:29:35,750: DEBUG/MainProcess] | Worker: Starting Consumer
[2024-04-19 17:29:35,750: DEBUG/MainProcess] | Consumer: Starting Connection
[2024-04-19 17:29:35,751: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 17:29:35,754: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 17:29:35,754: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:29:35,754: DEBUG/MainProcess] | Consumer: Starting Events
[2024-04-19 17:29:35,755: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 17:29:35,756: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:29:35,756: DEBUG/MainProcess] | Consumer: Starting Heart
[2024-04-19 17:29:35,757: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:29:35,757: DEBUG/MainProcess] | Consumer: Starting Mingle
[2024-04-19 17:29:35,757: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 17:29:36,762: INFO/MainProcess] mingle: all alone
[2024-04-19 17:29:36,762: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:29:36,762: DEBUG/MainProcess] | Consumer: Starting Tasks
[2024-04-19 17:29:36,764: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:29:36,764: DEBUG/MainProcess] | Consumer: Starting Control
[2024-04-19 17:29:36,766: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:29:36,766: DEBUG/MainProcess] | Consumer: Starting Gossip
[2024-04-19 17:29:36,768: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:29:36,768: DEBUG/MainProcess] | Consumer: Starting event loop
[2024-04-19 17:29:36,768: DEBUG/MainProcess] | Worker: Hub.register Pool...
[2024-04-19 17:29:36,768: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 17:29:36,769: DEBUG/MainProcess] basic.qos: prefetch_count->16
[2024-04-19 17:29:44,676: INFO/MainProcess] Task app.fetch_and_process_image[9832fdbe-5b72-4893-8fff-6e2b7f003364] received
[2024-04-19 17:29:44,676: DEBUG/MainProcess] TaskPool: Apply <function fast_trace_task at 0x7ff47aaa4550> (args:('app.fetch_and_process_image', '9832fdbe-5b72-4893-8fff-6e2b7f003364', {'lang': 'py', 'task': 'app.fetch_and_process_image', 'id': '9832fdbe-5b72-4893-8fff-6e2b7f003364', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': '9832fdbe-5b72-4893-8fff-6e2b7f003364', 'parent_id': None, 'argsrepr': "('http://images.cocodataset.org/unlabeled2017/000000369694.jpg',)", 'kwargsrepr': '{}', 'origin': 'gen1088483@ip-10-0-15-46.eu-west-2.compute.internal', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}, 'properties': {'correlation_id': '9832fdbe-5b72-4893-8fff-6e2b7f003364', 'reply_to': 'cde9fc44-56d9-3f1a-81cf-441f270cf8ee', 'delivery_mode': 2, 'delivery_info': {'exchange': '', 'routing_key': 'celery'}, 'priority': 0, 'body_encoding': 'base64', 'delivery_tag': '89fdfd43-edb3-4b21-803a-9398e53ccf08'}, 'reply_to': 'cde9fc44-56d9-3f1a-81cf-441f270cf8ee', 'correlation_id':... kwargs:{})
[2024-04-19 17:29:44,679: DEBUG/ForkPoolWorker-1] Starting new HTTP connection (1): images.cocodataset.org:80
[2024-04-19 17:29:44,913: DEBUG/ForkPoolWorker-1] http://images.cocodataset.org:80 "GET /unlabeled2017/000000369694.jpg HTTP/1.1" 200 142969
[2024-04-19 17:29:45,138: DEBUG/ForkPoolWorker-1] Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
[2024-04-19 17:29:45,138: DEBUG/ForkPoolWorker-1] Using default client. pid: 1703190, thread: 140688041981760
[2024-04-19 17:29:45,139: DEBUG/ForkPoolWorker-1] Acquiring 0
[2024-04-19 17:29:45,139: DEBUG/ForkPoolWorker-1] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7ff47abb9640>}) about to wait for the following futures []
[2024-04-19 17:29:45,139: DEBUG/ForkPoolWorker-1] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7ff47abb9640>}) done waiting for dependent futures
[2024-04-19 17:29:45,139: DEBUG/ForkPoolWorker-1] Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7ff47abb9640>}) with kwargs {'client': <botocore.client.S3 object at 0x7ff478dc0f10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x7ff47ac18af0>, 'osutil': <s3transfer.utils.OSUtils object at 0x7ff47ac18a30>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x7ff47ac249a0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x7ff47abb9640>}
[2024-04-19 17:29:45,139: DEBUG/ForkPoolWorker-1] Submitting task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x7ff47ac249a0> for transfer request: 0.
[2024-04-19 17:29:45,140: DEBUG/ForkPoolWorker-1] Acquiring 0
[2024-04-19 17:29:45,140: DEBUG/ForkPoolWorker-1] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) about to wait for the following futures []
[2024-04-19 17:29:45,140: DEBUG/ForkPoolWorker-1] Releasing acquire 0/None
[2024-04-19 17:29:45,140: DEBUG/ForkPoolWorker-1] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) done waiting for dependent futures
[2024-04-19 17:29:45,140: DEBUG/ForkPoolWorker-1] Executing task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x7ff478dc0f10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7ff47abb9c10>, 'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x7ff4796b3280>
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x7ff47972e670>
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x7ff4796b3b80>
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x7ff47972e5e0>
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7ff4796b4430>
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7ff478b78c40>>
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7ff47961b100>>
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x7ff47972e430>
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7ff4796b45e0>
[2024-04-19 17:29:45,141: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7ff478b78c40>>
[2024-04-19 17:29:45,142: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'us-east-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:29:45,142: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.amazonaws.com
[2024-04-19 17:29:45,142: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:29:45,142: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:29:45,143: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x7ff47984b790>
[2024-04-19 17:29:45,143: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x7ff47972e940>
[2024-04-19 17:29:45,143: DEBUG/ForkPoolWorker-1] Adding expect 100 continue header to request.
[2024-04-19 17:29:45,143: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7ff478b78c70>>
[2024-04-19 17:29:45,144: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x7ff47972e0d0>
[2024-04-19 17:29:45,144: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x7ff4796b3ca0>
[2024-04-19 17:29:45,144: DEBUG/ForkPoolWorker-1] Making request for OperationModel(name=PutObject) with params: {'url_path': '/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': 'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x7ff47abb9c10>, 'auth_path': '/comp0239-ucabrz5/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'url': 'https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7ff478d47340>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7ff47abb9c10>}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}, 'signing': {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'us-east-1'}]}}}
[2024-04-19 17:29:45,144: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7ff478ccab80>
[2024-04-19 17:29:45,144: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7ff478d472e0>>
[2024-04-19 17:29:45,144: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7ff47961b100>>
[2024-04-19 17:29:45,144: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7ff47972e310>
[2024-04-19 17:29:45,144: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7ff4796b4550>
[2024-04-19 17:29:45,144: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7ff478b78c70>>
[2024-04-19 17:29:45,145: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:29:45,145: DEBUG/ForkPoolWorker-1] CanonicalRequest:
PUT
/54ae161caf12eb6bc208836b44ed8f0d.jpg

content-md5:VK4WHK8S62vCCINrRO2PDQ==
host:comp0239-ucabrz5.s3.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T172945Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 17:29:45,145: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T172945Z
20240419/us-east-1/s3/aws4_request
2145146ea0668320d7d139233f79396868f8880ffb2c3bd7e4bc4e4e902a518b
[2024-04-19 17:29:45,145: DEBUG/ForkPoolWorker-1] Signature:
c3fe1df7d8656670b3c06fe3dc6cfab2e053fe8b11d58cd7998731be5126f46c
[2024-04-19 17:29:45,145: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7ff478ccac10>
[2024-04-19 17:29:45,145: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7ff4796b43a0>
[2024-04-19 17:29:45,145: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T172945Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/us-east-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=c3fe1df7d8656670b3c06fe3dc6cfab2e053fe8b11d58cd7998731be5126f46c', 'amz-sdk-invocation-id': b'19431af1-ee76-4388-8e07-704c2a322d69', 'amz-sdk-request': b'attempt=1', 'Content-Length': '142969'}>
[2024-04-19 17:29:45,146: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:29:45,146: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.amazonaws.com:443
[2024-04-19 17:29:45,170: DEBUG/ForkPoolWorker-1] Waiting for 100 Continue response.
[2024-04-19 17:29:45,173: DEBUG/ForkPoolWorker-1] Received a non 100 Continue response from the server, NOT sending request body.
[2024-04-19 17:29:45,173: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.amazonaws.com:443 "PUT /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 400 None
[2024-04-19 17:29:45,173: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-request-id': 'QFAGN3JWYRG3F7BE', 'x-amz-id-2': 'VxGxcYLwOmUAiCz7ireSXTbVSCC9aV8KPqSANGTYC8aF6bG0fxXzO9nBXBgohi5en6J67c0pVDU=', 'Content-Type': 'application/xml', 'Transfer-Encoding': 'chunked', 'Date': 'Fri, 19 Apr 2024 17:29:44 GMT', 'Server': 'AmazonS3', 'Connection': 'close'}
[2024-04-19 17:29:45,174: DEBUG/ForkPoolWorker-1] Response body:
b'<?xml version="1.0" encoding="UTF-8"?>\n<Error><Code>AuthorizationHeaderMalformed</Code><Message>The authorization header is malformed; the region \'us-east-1\' is wrong; expecting \'eu-west-2\'</Message><Region>eu-west-2</Region><RequestId>QFAGN3JWYRG3F7BE</RequestId><HostId>VxGxcYLwOmUAiCz7ireSXTbVSCC9aV8KPqSANGTYC8aF6bG0fxXzO9nBXBgohi5en6J67c0pVDU=</HostId></Error>'
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7ff478b78b80>
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7ff478b78c40>>
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] S3 client configured for region us-east-1 but the bucket comp0239-ucabrz5 is in region eu-west-2; Please configure the proper region to avoid multiple unnecessary redirects and signing attempts.
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7ff4796b45e0>
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7ff478b78c40>>
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] Updating URI from https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg to https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg
[2024-04-19 17:29:45,176: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:29:45,177: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:29:45,177: DEBUG/ForkPoolWorker-1] Response received to retry, sleeping for 0 seconds
[2024-04-19 17:29:45,177: DEBUG/ForkPoolWorker-1] Rewinding stream: <s3transfer.utils.ReadFileChunk object at 0x7ff47abb9c10>
[2024-04-19 17:29:45,177: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7ff478ccab80>
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7ff478d472e0>>
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7ff47961b100>>
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7ff47972e310>
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7ff4796b4550>
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7ff478b78c70>>
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] CanonicalRequest:
PUT
/54ae161caf12eb6bc208836b44ed8f0d.jpg

content-md5:VK4WHK8S62vCCINrRO2PDQ==
host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T172945Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T172945Z
20240419/eu-west-2/s3/aws4_request
b799496210fc9a3e1c84bb01f5d0bc1f7a0ed94a7ad6a828c2660b72e3952c6e
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Signature:
aeaccd4a949da5e22cfd4b5726d056fefd97bc3f6ea27902a97358a2f19b5572
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7ff478ccac10>
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7ff4796b43a0>
[2024-04-19 17:29:45,178: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T172945Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/eu-west-2/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=aeaccd4a949da5e22cfd4b5726d056fefd97bc3f6ea27902a97358a2f19b5572', 'amz-sdk-invocation-id': b'19431af1-ee76-4388-8e07-704c2a322d69', 'amz-sdk-request': b'ttl=20240419T173044Z; attempt=2; max=5', 'Content-Length': '142969'}>
[2024-04-19 17:29:45,179: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:29:45,179: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443
[2024-04-19 17:29:45,206: DEBUG/ForkPoolWorker-1] Waiting for 100 Continue response.
[2024-04-19 17:29:45,237: DEBUG/ForkPoolWorker-1] 100 Continue response seen, now sending request body.
[2024-04-19 17:29:45,276: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "PUT /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 200 0
[2024-04-19 17:29:45,276: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-id-2': 'JVm8KB8B1Xpw94iOtZXnBQget9h7iBOatAUe5JN3aGLf24SV5mO/LGjoRyPzlOmslxEWiM745io=', 'x-amz-request-id': 'QFAQXTZPYQ8JPG7J', 'Date': 'Fri, 19 Apr 2024 17:29:46 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"54ae161caf12eb6bc208836b44ed8f0d"', 'Server': 'AmazonS3', 'Content-Length': '0'}
[2024-04-19 17:29:45,276: DEBUG/ForkPoolWorker-1] Response body:
b''
[2024-04-19 17:29:45,276: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7ff478b78b80>
[2024-04-19 17:29:45,276: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:29:45,277: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7ff478b78c40>>
[2024-04-19 17:29:45,277: DEBUG/ForkPoolWorker-1] S3 request was previously redirected, not redirecting.
[2024-04-19 17:29:45,277: DEBUG/ForkPoolWorker-1] Releasing acquire 0/None
[2024-04-19 17:29:45,277: INFO/ForkPoolWorker-1] app.process_image[None]: Processing image with key: 54ae161caf12eb6bc208836b44ed8f0d.jpg
[2024-04-19 17:29:45,277: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function sse_md5 at 0x7ff47972e670>
[2024-04-19 17:29:45,277: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function validate_bucket_name at 0x7ff47972e5e0>
[2024-04-19 17:29:45,277: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7ff4796b4430>
[2024-04-19 17:29:45,277: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7ff478b78c40>>
[2024-04-19 17:29:45,277: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7ff47961b100>>
[2024-04-19 17:29:45,277: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function generate_idempotent_uuid at 0x7ff47972e430>
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7ff4796b45e0>
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7ff478b78c40>>
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function add_expect_header at 0x7ff47972e940>
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7ff478b78c70>>
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function add_recursion_detection_header at 0x7ff47972e0d0>
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function inject_api_version_header_if_needed at 0x7ff4796b3ca0>
[2024-04-19 17:29:45,278: DEBUG/ForkPoolWorker-1] Making request for OperationModel(name=GetObject) with params: {'url_path': '/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'query_string': {}, 'method': 'GET', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87'}, 'body': b'', 'auth_path': '/comp0239-ucabrz5/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'url': 'https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7ff478d47340>, 'has_streaming_input': False, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}, 'signing': {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-west-2'}]}}}
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function signal_not_transferring at 0x7ff478ccab80>
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7ff478d472e0>>
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.GetObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7ff47961b100>>
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.GetObject: calling handler <function set_operation_specific_signer at 0x7ff47972e310>
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Event before-sign.s3.GetObject: calling handler <function remove_arn_from_signing_path at 0x7ff4796b4550>
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Event before-sign.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7ff478b78c70>>
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] CanonicalRequest:
GET
/54ae161caf12eb6bc208836b44ed8f0d.jpg

host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:20240419T172945Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T172945Z
20240419/eu-west-2/s3/aws4_request
5c38dad07a970a73ee3d28c659637f067c18fa05a4e1a5a5486f1b3770943f6d
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Signature:
38c6c64f1980d8de8a3561cd0689b9efe75957ad0a1b158e65c4d1bbf54496fb
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function signal_transferring at 0x7ff478ccac10>
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function add_retry_headers at 0x7ff4796b43a0>
[2024-04-19 17:29:45,279: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=True, method=GET, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'X-Amz-Date': b'20240419T172945Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/eu-west-2/s3/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=38c6c64f1980d8de8a3561cd0689b9efe75957ad0a1b158e65c4d1bbf54496fb', 'amz-sdk-invocation-id': b'f9162d2d-6e2d-4d59-b434-fe72ee1fcb03', 'amz-sdk-request': b'attempt=1'}>
[2024-04-19 17:29:45,280: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:29:45,298: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "GET /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 200 142969
[2024-04-19 17:29:45,298: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-id-2': 'enLnpWAS+srUerQWGFkQqh4IjzNeoje7XZd5C1eIbnc8yWSsKs6uOrp3iGZIsuQslt1VXZpZKis=', 'x-amz-request-id': 'QFASFXQK0HS3RD5T', 'Date': 'Fri, 19 Apr 2024 17:29:46 GMT', 'Last-Modified': 'Fri, 19 Apr 2024 17:29:46 GMT', 'ETag': '"54ae161caf12eb6bc208836b44ed8f0d"', 'x-amz-server-side-encryption': 'AES256', 'Accept-Ranges': 'bytes', 'Content-Type': 'binary/octet-stream', 'Server': 'AmazonS3', 'Content-Length': '142969'}
[2024-04-19 17:29:45,298: DEBUG/ForkPoolWorker-1] Response body:
<botocore.response.StreamingBody object at 0x7ff47abccc10>
[2024-04-19 17:29:45,298: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.GetObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7ff478b78b80>
[2024-04-19 17:29:45,299: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:29:45,299: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7ff478b78c40>>
[2024-04-19 17:29:45,309: ERROR/ForkPoolWorker-1] app.process_image[None]: Model or processor is not loaded.
[2024-04-19 17:29:45,311: ERROR/ForkPoolWorker-1] Task app.fetch_and_process_image[9832fdbe-5b72-4893-8fff-6e2b7f003364] raised unexpected: ValueError('Model or processor is not loaded.')
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 95, in fetch_and_process_image
    return process_image(s3_key)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/local.py", line 182, in __call__
    return self._get_current_object()(*a, **kw)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 737, in __protected_call__
    return orig(self, *args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 411, in __call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 117, in process_image
    raise ValueError('Model or processor is not loaded.')
ValueError: Model or processor is not loaded.
[2024-04-19 17:37:03,527: DEBUG/MainProcess] | Worker: Closing Hub...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Worker: Closing Pool...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Worker: Closing Consumer...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Worker: Stopping Consumer...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Closing Connection...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Closing Events...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Closing Heart...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Closing Mingle...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Closing Tasks...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Closing Control...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Closing Gossip...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Closing event loop...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Stopping event loop...
[2024-04-19 17:37:03,528: DEBUG/MainProcess] | Consumer: Stopping Gossip...
[2024-04-19 17:37:03,529: DEBUG/MainProcess] | Consumer: Stopping Control...
[2024-04-19 17:37:03,530: DEBUG/MainProcess] | Consumer: Stopping Tasks...
[2024-04-19 17:37:03,530: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 17:37:03,530: DEBUG/MainProcess] | Consumer: Stopping Mingle...
[2024-04-19 17:37:03,530: DEBUG/MainProcess] | Consumer: Stopping Heart...
[2024-04-19 17:37:03,531: DEBUG/MainProcess] | Consumer: Stopping Events...
[2024-04-19 17:37:03,531: DEBUG/MainProcess] | Consumer: Stopping Connection...
[2024-04-19 17:37:03,531: DEBUG/MainProcess] | Worker: Stopping Pool...
[2024-04-19 17:37:04,538: DEBUG/MainProcess] | Worker: Stopping Hub...
[2024-04-19 17:37:04,538: DEBUG/MainProcess] | Consumer: Shutdown Gossip...
[2024-04-19 17:37:04,538: DEBUG/MainProcess] | Consumer: Shutdown Control...
[2024-04-19 17:37:04,538: DEBUG/MainProcess] | Consumer: Shutdown Tasks...
[2024-04-19 17:37:04,538: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 17:37:04,538: DEBUG/MainProcess] Closing consumer channel...
[2024-04-19 17:37:04,538: DEBUG/MainProcess] | Consumer: Shutdown Heart...
[2024-04-19 17:37:04,538: DEBUG/MainProcess] | Consumer: Shutdown Events...
[2024-04-19 17:37:04,539: DEBUG/MainProcess] | Consumer: Shutdown Connection...
[2024-04-19 17:37:04,539: DEBUG/MainProcess] removing tasks from inqueue until task handler finished
[2024-04-19 17:37:09,229: DEBUG/MainProcess] | Worker: Preparing bootsteps.
[2024-04-19 17:37:09,230: DEBUG/MainProcess] | Worker: Building graph...
[2024-04-19 17:37:09,230: DEBUG/MainProcess] | Worker: New boot order: {Beat, StateDB, Timer, Hub, Pool, Autoscaler, Consumer}
[2024-04-19 17:37:09,232: DEBUG/MainProcess] | Consumer: Preparing bootsteps.
[2024-04-19 17:37:09,232: DEBUG/MainProcess] | Consumer: Building graph...
[2024-04-19 17:37:09,266: DEBUG/MainProcess] | Consumer: New boot order: {Connection, Agent, Events, Heart, Mingle, Tasks, Control, Gossip, event loop}
[2024-04-19 17:37:09,301: DEBUG/MainProcess] | Worker: Starting Hub
[2024-04-19 17:37:09,301: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:37:09,301: DEBUG/MainProcess] | Worker: Starting Pool
[2024-04-19 17:37:09,413: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:37:09,413: DEBUG/MainProcess] | Worker: Starting Consumer
[2024-04-19 17:37:09,414: DEBUG/MainProcess] | Consumer: Starting Connection
[2024-04-19 17:37:09,414: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 17:37:09,418: INFO/MainProcess] Connected to redis://localhost:6379/0
[2024-04-19 17:37:09,418: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:37:09,418: DEBUG/MainProcess] | Consumer: Starting Events
[2024-04-19 17:37:09,418: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 17:37:09,419: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:37:09,420: DEBUG/MainProcess] | Consumer: Starting Heart
[2024-04-19 17:37:09,421: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:37:09,421: DEBUG/MainProcess] | Consumer: Starting Mingle
[2024-04-19 17:37:09,421: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 17:37:10,426: INFO/MainProcess] mingle: all alone
[2024-04-19 17:37:10,426: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:37:10,426: DEBUG/MainProcess] | Consumer: Starting Tasks
[2024-04-19 17:37:10,428: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:37:10,428: DEBUG/MainProcess] | Consumer: Starting Control
[2024-04-19 17:37:10,430: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:37:10,430: DEBUG/MainProcess] | Consumer: Starting Gossip
[2024-04-19 17:37:10,432: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 17:37:10,432: DEBUG/MainProcess] | Consumer: Starting event loop
[2024-04-19 17:37:10,433: DEBUG/MainProcess] | Worker: Hub.register Pool...
[2024-04-19 17:37:10,433: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 17:37:10,433: DEBUG/MainProcess] basic.qos: prefetch_count->16
[2024-04-19 17:37:16,336: INFO/MainProcess] Task app.fetch_and_process_image[f56a28d0-64bc-4a90-b3a7-eab2d1624762] received
[2024-04-19 17:37:16,336: DEBUG/MainProcess] TaskPool: Apply <function fast_trace_task at 0x7f58ce869550> (args:('app.fetch_and_process_image', 'f56a28d0-64bc-4a90-b3a7-eab2d1624762', {'lang': 'py', 'task': 'app.fetch_and_process_image', 'id': 'f56a28d0-64bc-4a90-b3a7-eab2d1624762', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': 'f56a28d0-64bc-4a90-b3a7-eab2d1624762', 'parent_id': None, 'argsrepr': "('http://images.cocodataset.org/unlabeled2017/000000369694.jpg',)", 'kwargsrepr': '{}', 'origin': 'gen1088483@ip-10-0-15-46.eu-west-2.compute.internal', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}, 'properties': {'correlation_id': 'f56a28d0-64bc-4a90-b3a7-eab2d1624762', 'reply_to': 'cde9fc44-56d9-3f1a-81cf-441f270cf8ee', 'delivery_mode': 2, 'delivery_info': {'exchange': '', 'routing_key': 'celery'}, 'priority': 0, 'body_encoding': 'base64', 'delivery_tag': '0b60d6dd-6d92-47a9-a190-b80a6b1c9048'}, 'reply_to': 'cde9fc44-56d9-3f1a-81cf-441f270cf8ee', 'correlation_id':... kwargs:{})
[2024-04-19 17:37:16,339: DEBUG/ForkPoolWorker-1] Starting new HTTP connection (1): images.cocodataset.org:80
[2024-04-19 17:37:16,595: DEBUG/ForkPoolWorker-1] http://images.cocodataset.org:80 "GET /unlabeled2017/000000369694.jpg HTTP/1.1" 200 142969
[2024-04-19 17:37:16,822: DEBUG/ForkPoolWorker-1] Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
[2024-04-19 17:37:16,822: DEBUG/ForkPoolWorker-1] Using default client. pid: 1703711, thread: 140019434047296
[2024-04-19 17:37:16,822: DEBUG/ForkPoolWorker-1] Acquiring 0
[2024-04-19 17:37:16,822: DEBUG/ForkPoolWorker-1] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f58ce97f640>}) about to wait for the following futures []
[2024-04-19 17:37:16,823: DEBUG/ForkPoolWorker-1] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f58ce97f640>}) done waiting for dependent futures
[2024-04-19 17:37:16,823: DEBUG/ForkPoolWorker-1] Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f58ce97f640>}) with kwargs {'client': <botocore.client.S3 object at 0x7f58ccb82f10>, 'config': <boto3.s3.transfer.TransferConfig object at 0x7f58ce9ddaf0>, 'osutil': <s3transfer.utils.OSUtils object at 0x7f58ce9dda30>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x7f58ce9e79a0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f58ce97f640>}
[2024-04-19 17:37:16,823: DEBUG/ForkPoolWorker-1] Submitting task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x7f58ce9e79a0> for transfer request: 0.
[2024-04-19 17:37:16,823: DEBUG/ForkPoolWorker-1] Acquiring 0
[2024-04-19 17:37:16,823: DEBUG/ForkPoolWorker-1] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) about to wait for the following futures []
[2024-04-19 17:37:16,823: DEBUG/ForkPoolWorker-1] Releasing acquire 0/None
[2024-04-19 17:37:16,823: DEBUG/ForkPoolWorker-1] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) done waiting for dependent futures
[2024-04-19 17:37:16,823: DEBUG/ForkPoolWorker-1] Executing task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x7f58ccb82f10>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f58ce97fc10>, 'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}
[2024-04-19 17:37:16,824: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x7f58cd475280>
[2024-04-19 17:37:16,824: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x7f58cd4f0670>
[2024-04-19 17:37:16,824: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x7f58cd475b80>
[2024-04-19 17:37:16,824: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x7f58cd4f05e0>
[2024-04-19 17:37:16,824: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7f58cd476430>
[2024-04-19 17:37:16,824: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7f58cc93ac40>>
[2024-04-19 17:37:16,824: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7f58cd3de100>>
[2024-04-19 17:37:16,824: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x7f58cd4f0430>
[2024-04-19 17:37:16,825: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f58cd4765e0>
[2024-04-19 17:37:16,825: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f58cc93ac40>>
[2024-04-19 17:37:16,825: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'us-east-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:37:16,826: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.amazonaws.com
[2024-04-19 17:37:16,826: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:37:16,826: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:37:16,826: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x7f58cd60e790>
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x7f58cd4f0940>
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Adding expect 100 continue header to request.
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7f58cc93ac70>>
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x7f58cd4f00d0>
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x7f58cd475ca0>
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Making request for OperationModel(name=PutObject) with params: {'url_path': '/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': 'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x7f58ce97fc10>, 'auth_path': '/comp0239-ucabrz5/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'url': 'https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7f58ccb09340>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7f58ce97fc10>}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}, 'signing': {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'us-east-1'}]}}}
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7f58cca8cb80>
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f58ccb092e0>>
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f58cd3de100>>
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7f58cd4f0310>
[2024-04-19 17:37:16,827: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7f58cd476550>
[2024-04-19 17:37:16,828: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7f58cc93ac70>>
[2024-04-19 17:37:16,828: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:37:16,828: DEBUG/ForkPoolWorker-1] CanonicalRequest:
PUT
/54ae161caf12eb6bc208836b44ed8f0d.jpg

content-md5:VK4WHK8S62vCCINrRO2PDQ==
host:comp0239-ucabrz5.s3.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T173716Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 17:37:16,828: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T173716Z
20240419/us-east-1/s3/aws4_request
bcc9a988cec0cac28f3a198d8a02750679c7e0c073fe16f075fb09541e2350ce
[2024-04-19 17:37:16,828: DEBUG/ForkPoolWorker-1] Signature:
84467f38a3d0e45d28e96c4b65ae8a754d754d6bc44aadce6eb6974912985a73
[2024-04-19 17:37:16,828: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7f58cca8cc10>
[2024-04-19 17:37:16,828: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7f58cd4763a0>
[2024-04-19 17:37:16,828: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T173716Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/us-east-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=84467f38a3d0e45d28e96c4b65ae8a754d754d6bc44aadce6eb6974912985a73', 'amz-sdk-invocation-id': b'35c5021a-5259-4f5b-aa91-48c53b27a29b', 'amz-sdk-request': b'attempt=1', 'Content-Length': '142969'}>
[2024-04-19 17:37:16,829: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:37:16,829: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.amazonaws.com:443
[2024-04-19 17:37:16,856: DEBUG/ForkPoolWorker-1] Waiting for 100 Continue response.
[2024-04-19 17:37:16,859: DEBUG/ForkPoolWorker-1] Received a non 100 Continue response from the server, NOT sending request body.
[2024-04-19 17:37:16,860: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.amazonaws.com:443 "PUT /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 400 None
[2024-04-19 17:37:16,860: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-request-id': 'EWQQF5V8AQB81QQ8', 'x-amz-id-2': 'r8K600bGHBcqiNynfvHJoyu1cUhzQ2+BL4HhlaXA+yTcZBpxP6UuC5JvZveVWnWLr4euyYfgrwY=', 'Content-Type': 'application/xml', 'Transfer-Encoding': 'chunked', 'Date': 'Fri, 19 Apr 2024 17:37:16 GMT', 'Server': 'AmazonS3', 'Connection': 'close'}
[2024-04-19 17:37:16,860: DEBUG/ForkPoolWorker-1] Response body:
b'<?xml version="1.0" encoding="UTF-8"?>\n<Error><Code>AuthorizationHeaderMalformed</Code><Message>The authorization header is malformed; the region \'us-east-1\' is wrong; expecting \'eu-west-2\'</Message><Region>eu-west-2</Region><RequestId>EWQQF5V8AQB81QQ8</RequestId><HostId>r8K600bGHBcqiNynfvHJoyu1cUhzQ2+BL4HhlaXA+yTcZBpxP6UuC5JvZveVWnWLr4euyYfgrwY=</HostId></Error>'
[2024-04-19 17:37:16,862: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f58cc93ab80>
[2024-04-19 17:37:16,862: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:37:16,862: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f58cc93ac40>>
[2024-04-19 17:37:16,862: DEBUG/ForkPoolWorker-1] S3 client configured for region us-east-1 but the bucket comp0239-ucabrz5 is in region eu-west-2; Please configure the proper region to avoid multiple unnecessary redirects and signing attempts.
[2024-04-19 17:37:16,862: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f58cd4765e0>
[2024-04-19 17:37:16,862: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f58cc93ac40>>
[2024-04-19 17:37:16,862: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:37:16,863: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 17:37:16,863: DEBUG/ForkPoolWorker-1] Updating URI from https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg to https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg
[2024-04-19 17:37:16,863: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:37:16,863: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:37:16,863: DEBUG/ForkPoolWorker-1] Response received to retry, sleeping for 0 seconds
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Rewinding stream: <s3transfer.utils.ReadFileChunk object at 0x7f58ce97fc10>
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7f58cca8cb80>
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f58ccb092e0>>
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f58cd3de100>>
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7f58cd4f0310>
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7f58cd476550>
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7f58cc93ac70>>
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] CanonicalRequest:
PUT
/54ae161caf12eb6bc208836b44ed8f0d.jpg

content-md5:VK4WHK8S62vCCINrRO2PDQ==
host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T173716Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T173716Z
20240419/eu-west-2/s3/aws4_request
5b06d0bbf3121aa114edc380ba0753acb034327539ed4b4a513a18e0755d6bb1
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Signature:
e54c215856ed5ca71246bfcb14d6499873fede158aa1a9f90e189259a365d0d1
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7f58cca8cc10>
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7f58cd4763a0>
[2024-04-19 17:37:16,864: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T173716Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/eu-west-2/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=e54c215856ed5ca71246bfcb14d6499873fede158aa1a9f90e189259a365d0d1', 'amz-sdk-invocation-id': b'35c5021a-5259-4f5b-aa91-48c53b27a29b', 'amz-sdk-request': b'ttl=20240419T173816Z; attempt=2; max=5', 'Content-Length': '142969'}>
[2024-04-19 17:37:16,865: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:37:16,865: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443
[2024-04-19 17:37:16,889: DEBUG/ForkPoolWorker-1] Waiting for 100 Continue response.
[2024-04-19 17:37:16,955: DEBUG/ForkPoolWorker-1] 100 Continue response seen, now sending request body.
[2024-04-19 17:37:17,007: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "PUT /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 200 0
[2024-04-19 17:37:17,007: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-id-2': '2/NZNBe1JV/94Rp4WfPihA+toPcpey8R6gpbEFS6+F3wJIuT5u9ysguo+gy8HH62f1NuGLfYH8E=', 'x-amz-request-id': 'EWQGKSJ19ATYANXA', 'Date': 'Fri, 19 Apr 2024 17:37:17 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"54ae161caf12eb6bc208836b44ed8f0d"', 'Server': 'AmazonS3', 'Content-Length': '0'}
[2024-04-19 17:37:17,007: DEBUG/ForkPoolWorker-1] Response body:
b''
[2024-04-19 17:37:17,007: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f58cc93ab80>
[2024-04-19 17:37:17,007: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:37:17,007: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f58cc93ac40>>
[2024-04-19 17:37:17,008: DEBUG/ForkPoolWorker-1] S3 request was previously redirected, not redirecting.
[2024-04-19 17:37:17,008: DEBUG/ForkPoolWorker-1] Releasing acquire 0/None
[2024-04-19 17:37:17,008: INFO/ForkPoolWorker-1] app.process_image[None]: Processing image with key: 54ae161caf12eb6bc208836b44ed8f0d.jpg
[2024-04-19 17:37:17,008: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function sse_md5 at 0x7f58cd4f0670>
[2024-04-19 17:37:17,008: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function validate_bucket_name at 0x7f58cd4f05e0>
[2024-04-19 17:37:17,008: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7f58cd476430>
[2024-04-19 17:37:17,008: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7f58cc93ac40>>
[2024-04-19 17:37:17,008: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7f58cd3de100>>
[2024-04-19 17:37:17,008: DEBUG/ForkPoolWorker-1] Event before-parameter-build.s3.GetObject: calling handler <function generate_idempotent_uuid at 0x7f58cd4f0430>
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f58cd4765e0>
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f58cc93ac40>>
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function add_expect_header at 0x7f58cd4f0940>
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7f58cc93ac70>>
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function add_recursion_detection_header at 0x7f58cd4f00d0>
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Event before-call.s3.GetObject: calling handler <function inject_api_version_header_if_needed at 0x7f58cd475ca0>
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Making request for OperationModel(name=GetObject) with params: {'url_path': '/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'query_string': {}, 'method': 'GET', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87'}, 'body': b'', 'auth_path': '/comp0239-ucabrz5/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'url': 'https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7f58ccb09340>, 'has_streaming_input': False, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}, 'signing': {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-west-2'}]}}}
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function signal_not_transferring at 0x7f58cca8cb80>
[2024-04-19 17:37:17,009: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f58ccb092e0>>
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.GetObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7f58cd3de100>>
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Event choose-signer.s3.GetObject: calling handler <function set_operation_specific_signer at 0x7f58cd4f0310>
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Event before-sign.s3.GetObject: calling handler <function remove_arn_from_signing_path at 0x7f58cd476550>
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Event before-sign.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7f58cc93ac70>>
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Calculating signature using v4 auth.
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] CanonicalRequest:
GET
/54ae161caf12eb6bc208836b44ed8f0d.jpg

host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:20240419T173717Z
x-amz-security-token:IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] StringToSign:
AWS4-HMAC-SHA256
20240419T173717Z
20240419/eu-west-2/s3/aws4_request
ecf3fcdf987483e0e43aa4e766bad1e6224d4baa0d380520039ed3746c94a996
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Signature:
8804031e36a16b9c29d982f664f6bac9418530196774af5b31e7a4dc31d57b23
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function signal_transferring at 0x7f58cca8cc10>
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Event request-created.s3.GetObject: calling handler <function add_retry_headers at 0x7f58cd4763a0>
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Sending http request: <AWSPreparedRequest stream_output=True, method=GET, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'X-Amz-Date': b'20240419T173717Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENH//////////wEaCWV1LXdlc3QtMiJIMEYCIQDnyxMPZ/IQJHgPh2gJQqwqYwbb9DH/OCMrITiyFiYELAIhAPSxFsxJzDNNhT7N/lxpjq7u0lAAh+f/sRxeMPCHvKwRKrsFCBoQABoMNjg4NDg0MzcyMDA0IgyA/3PuxLOIKgnExE8qmAXXCu4SgnKgciOiUQFHvwZwRebLlb0ASAy7JFzHBZngzTEKAHWjYHr7/wfAcfBpoJ3POcRflzCCKtzVVTOhqAylSNzZ9JunvlOExYgRiOUE5NLNJXmAUHlqV2bB7B0uRsX01yPyjNR7kuleu4j4CXIOg/ik69UEfPy3arRcuEXqrRJCvmR0zVgoJ8i5OOkMqrcX0sWFEse+Oi3idFwsOAQwFRDF351JDPQb2E/XUCM1VGJDKXhcuDaPOcBStZhaOojNGwBEomYZMY/MXoG/It0/r0kyIAcnC2DQOPalnFcBW505A0eu0t/C/fvxomuO1D47vRAC05rRKZO1ZNvRyI+ZtknvW0arZAC/CpXAPlH2e3A1IFvpI0kNNXGC9tulKvPRApfVkDfFgXOCLXGDHazJRq5PWO7wSoamkoDWVc0NnToSHfPXg/UwMMp20Pglfvb1burowgnV/1T29/xEoh+L1YPRX1pbeBdoAH1qfgl2kg8Jb9dK3DQa03kzXoJUvolq4LUxYSxu55uNKRqvmKf295291A0PWcZIhGYxFgwCz/uledGkeVeJIhZdBwrdv6dyjCN/O5yBiaqU1Qwjv+XbNZskc0J/+JcHyJ01JPwp2rxqs5z5gFY4mxy+EEvFQFshJWZkv3bQeHf8EYpWMQrm+prz5jFmBa1c7DbfW0VxT2pVbJW8LIDryVWnkKIHWuq/80UcBUOCsxsMb5iYtbxjbo/DaRb+8IG2OsxARDmDe7iOXaS4MEZwlCEtP4Gl+3mwdkFMSeUwCc6RmPSzEbYxnXhSg7mhCshTznR3lYpI+juIdvHXK8/+XRSYZeTATcCe0pKovnGOwzd4aUw5uZ+cVTeNsh7oID0CDv+P6tnBvfXMPFM+KKAPMP25irEGOrABT3QslQFyDvoB+WUHH5+kGzUd01+bc8piUh2ikjlPf2kAlevR+xPHiOmh/Tzrv6mAqzEkPFhYNYi6e83VnvxCCpyg5W3RaNks3MhjmclnXaJKGPifpYaIdcBUP0EehawaMQI/jqPMrcUYTs763L1HXoHUvErYmujZ8/y9y/4ci4FGVIjJjtwv/EXwZ6KTzrq/GAGsHrc8oImLaVoQ2HleS4AG9e0JdM+AYF59W+0uxdQ=', 'X-Amz-Content-SHA256': b'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSN3NZPEYJ/20240419/eu-west-2/s3/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=8804031e36a16b9c29d982f664f6bac9418530196774af5b31e7a4dc31d57b23', 'amz-sdk-invocation-id': b'af29f3a5-dbe6-4870-bd8f-c2edf0466097', 'amz-sdk-request': b'attempt=1'}>
[2024-04-19 17:37:17,010: DEBUG/ForkPoolWorker-1] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 17:37:17,027: DEBUG/ForkPoolWorker-1] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "GET /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 200 142969
[2024-04-19 17:37:17,027: DEBUG/ForkPoolWorker-1] Response headers: {'x-amz-id-2': 'wVhehgrwqedlt6Px4epbf5Z/6NfxnMWPyexg4S4w/Pvi5vwwNrmT34hCp9AyE+99NSDAHp4dUVs=', 'x-amz-request-id': 'HC3Q6AB2RR2S906C', 'Date': 'Fri, 19 Apr 2024 17:37:18 GMT', 'Last-Modified': 'Fri, 19 Apr 2024 17:37:17 GMT', 'ETag': '"54ae161caf12eb6bc208836b44ed8f0d"', 'x-amz-server-side-encryption': 'AES256', 'Accept-Ranges': 'bytes', 'Content-Type': 'binary/octet-stream', 'Server': 'AmazonS3', 'Content-Length': '142969'}
[2024-04-19 17:37:17,027: DEBUG/ForkPoolWorker-1] Response body:
<botocore.response.StreamingBody object at 0x7f58ce98fc10>
[2024-04-19 17:37:17,028: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.GetObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f58cc93ab80>
[2024-04-19 17:37:17,028: DEBUG/ForkPoolWorker-1] No retry needed.
[2024-04-19 17:37:17,028: DEBUG/ForkPoolWorker-1] Event needs-retry.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f58cc93ac40>>
[2024-04-19 17:37:17,039: ERROR/ForkPoolWorker-1] Task app.fetch_and_process_image[f56a28d0-64bc-4a90-b3a7-eab2d1624762] raised unexpected: AttributeError("'Settings' object has no attribute 'processor'")
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/utils/collections.py", line 111, in __getattr__
    return self[k]
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/utils/collections.py", line 396, in __getitem__
    return self.__missing__(key)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/utils/collections.py", line 238, in __missing__
    raise KeyError(key)
KeyError: 'processor'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 95, in fetch_and_process_image
    return process_image(s3_key)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/local.py", line 182, in __call__
    return self._get_current_object()(*a, **kw)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 737, in __protected_call__
    return orig(self, *args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 411, in __call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 115, in process_image
    processor = self.app.conf.processor
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/utils/collections.py", line 113, in __getattr__
    raise AttributeError(
AttributeError: 'Settings' object has no attribute 'processor'
[2024-04-19 19:35:17,576: DEBUG/MainProcess] | Worker: Closing Hub...
[2024-04-19 19:35:17,576: DEBUG/MainProcess] | Worker: Closing Pool...
[2024-04-19 19:35:17,576: DEBUG/MainProcess] | Worker: Closing Consumer...
[2024-04-19 19:35:17,576: DEBUG/MainProcess] | Worker: Stopping Consumer...
[2024-04-19 19:35:17,576: DEBUG/MainProcess] | Consumer: Closing Connection...
[2024-04-19 19:35:17,576: DEBUG/MainProcess] | Consumer: Closing Events...
[2024-04-19 19:35:17,576: DEBUG/MainProcess] | Consumer: Closing Heart...
[2024-04-19 19:35:17,577: DEBUG/MainProcess] | Consumer: Closing Mingle...
[2024-04-19 19:35:17,577: DEBUG/MainProcess] | Consumer: Closing Tasks...
[2024-04-19 19:35:17,577: DEBUG/MainProcess] | Consumer: Closing Control...
[2024-04-19 19:35:17,577: DEBUG/MainProcess] | Consumer: Closing Gossip...
[2024-04-19 19:35:17,577: DEBUG/MainProcess] | Consumer: Closing event loop...
[2024-04-19 19:35:17,577: DEBUG/MainProcess] | Consumer: Stopping event loop...
[2024-04-19 19:35:17,577: DEBUG/MainProcess] | Consumer: Stopping Gossip...
[2024-04-19 19:35:17,578: DEBUG/MainProcess] | Consumer: Stopping Control...
[2024-04-19 19:35:17,578: DEBUG/MainProcess] | Consumer: Stopping Tasks...
[2024-04-19 19:35:17,579: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 19:35:17,579: DEBUG/MainProcess] | Consumer: Stopping Mingle...
[2024-04-19 19:35:17,579: DEBUG/MainProcess] | Consumer: Stopping Heart...
[2024-04-19 19:35:17,579: DEBUG/MainProcess] | Consumer: Stopping Events...
[2024-04-19 19:35:17,579: DEBUG/MainProcess] | Consumer: Stopping Connection...
[2024-04-19 19:35:17,579: DEBUG/MainProcess] | Worker: Stopping Pool...
[2024-04-19 19:35:18,586: DEBUG/MainProcess] | Worker: Stopping Hub...
[2024-04-19 19:35:18,586: DEBUG/MainProcess] | Consumer: Shutdown Gossip...
[2024-04-19 19:35:18,586: DEBUG/MainProcess] | Consumer: Shutdown Control...
[2024-04-19 19:35:18,586: DEBUG/MainProcess] | Consumer: Shutdown Tasks...
[2024-04-19 19:35:18,586: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 19:35:18,586: DEBUG/MainProcess] Closing consumer channel...
[2024-04-19 19:35:18,586: DEBUG/MainProcess] | Consumer: Shutdown Heart...
[2024-04-19 19:35:18,586: DEBUG/MainProcess] | Consumer: Shutdown Events...
[2024-04-19 19:35:18,586: DEBUG/MainProcess] | Consumer: Shutdown Connection...
[2024-04-19 19:35:18,587: DEBUG/MainProcess] removing tasks from inqueue until task handler finished
[2024-04-19 19:35:27,856: DEBUG/MainProcess] | Worker: Preparing bootsteps.
[2024-04-19 19:35:27,857: DEBUG/MainProcess] | Worker: Building graph...
[2024-04-19 19:35:27,857: DEBUG/MainProcess] | Worker: New boot order: {Beat, StateDB, Timer, Hub, Pool, Autoscaler, Consumer}
[2024-04-19 19:35:27,859: DEBUG/MainProcess] | Consumer: Preparing bootsteps.
[2024-04-19 19:35:27,860: DEBUG/MainProcess] | Consumer: Building graph...
[2024-04-19 19:35:27,892: DEBUG/MainProcess] | Consumer: New boot order: {Connection, Agent, Events, Heart, Mingle, Gossip, Tasks, Control, event loop}
[2024-04-19 19:35:27,927: DEBUG/MainProcess] | Worker: Starting Hub
[2024-04-19 19:35:27,927: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:35:27,927: DEBUG/MainProcess] | Worker: Starting Pool
[2024-04-19 19:35:28,057: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:35:28,058: DEBUG/MainProcess] | Worker: Starting Consumer
[2024-04-19 19:35:28,058: DEBUG/MainProcess] | Consumer: Starting Connection
[2024-04-19 19:35:28,059: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 19:35:28,064: INFO/MainProcess] Connected to redis://10.0.15.135:6379/0
[2024-04-19 19:35:28,064: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:35:28,064: DEBUG/MainProcess] | Consumer: Starting Events
[2024-04-19 19:35:28,065: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 19:35:28,066: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:35:28,066: DEBUG/MainProcess] | Consumer: Starting Heart
[2024-04-19 19:35:28,068: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:35:28,068: DEBUG/MainProcess] | Consumer: Starting Mingle
[2024-04-19 19:35:28,068: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 19:35:29,074: INFO/MainProcess] mingle: all alone
[2024-04-19 19:35:29,075: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:35:29,075: DEBUG/MainProcess] | Consumer: Starting Gossip
[2024-04-19 19:35:29,078: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:35:29,078: DEBUG/MainProcess] | Consumer: Starting Tasks
[2024-04-19 19:35:29,081: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:35:29,081: DEBUG/MainProcess] | Consumer: Starting Control
[2024-04-19 19:35:29,083: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:35:29,083: DEBUG/MainProcess] | Consumer: Starting event loop
[2024-04-19 19:35:29,083: DEBUG/MainProcess] | Worker: Hub.register Pool...
[2024-04-19 19:35:29,084: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 19:35:29,084: DEBUG/MainProcess] basic.qos: prefetch_count->16
[2024-04-19 19:35:30,010: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:35:30,067: DEBUG/ForkPoolWorker-2] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:35:30,120: DEBUG/ForkPoolWorker-4] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:35:30,145: DEBUG/ForkPoolWorker-3] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:35:30,181: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/preprocessor_config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,208: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/preprocessor_config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,238: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/preprocessor_config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,258: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/preprocessor_config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,274: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/tokenizer_config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,301: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/tokenizer_config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,337: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/tokenizer_config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,391: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/processor_config.json HTTP/1.1" 404 0
[2024-04-19 19:35:30,414: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/processor_config.json HTTP/1.1" 404 0
[2024-04-19 19:35:30,451: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/processor_config.json HTTP/1.1" 404 0
[2024-04-19 19:35:30,470: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/tokenizer_config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,519: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,556: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,586: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/processor_config.json HTTP/1.1" 404 0
[2024-04-19 19:35:30,612: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,615: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:35:30,651: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,654: DEBUG/ForkPoolWorker-4] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:35:30,694: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,733: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/model.safetensors HTTP/1.1" 404 0
[2024-04-19 19:35:30,755: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,772: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/model.safetensors HTTP/1.1" 404 0
[2024-04-19 19:35:30,782: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,786: DEBUG/ForkPoolWorker-3] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:35:30,845: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:35:30,849: DEBUG/ForkPoolWorker-2] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:35:30,901: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/model.safetensors HTTP/1.1" 404 0
[2024-04-19 19:35:30,970: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/model.safetensors HTTP/1.1" 404 0
[2024-04-19 19:35:34,292: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/generation_config.json HTTP/1.1" 404 0
[2024-04-19 19:35:34,294: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/generation_config.json HTTP/1.1" 404 0
[2024-04-19 19:35:34,296: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/generation_config.json HTTP/1.1" 404 0
[2024-04-19 19:35:34,297: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/generation_config.json HTTP/1.1" 404 0
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Worker: Closing Hub...
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Worker: Closing Pool...
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Worker: Closing Consumer...
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Worker: Stopping Consumer...
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Consumer: Closing Connection...
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Consumer: Closing Events...
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Consumer: Closing Heart...
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Consumer: Closing Mingle...
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Consumer: Closing Gossip...
[2024-04-19 19:36:13,279: DEBUG/MainProcess] | Consumer: Closing Tasks...
[2024-04-19 19:36:13,280: DEBUG/MainProcess] | Consumer: Closing Control...
[2024-04-19 19:36:13,280: DEBUG/MainProcess] | Consumer: Closing event loop...
[2024-04-19 19:36:13,280: DEBUG/MainProcess] | Consumer: Stopping event loop...
[2024-04-19 19:36:13,280: DEBUG/MainProcess] | Consumer: Stopping Control...
[2024-04-19 19:36:13,282: DEBUG/MainProcess] | Consumer: Stopping Tasks...
[2024-04-19 19:36:13,282: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 19:36:13,282: DEBUG/MainProcess] | Consumer: Stopping Gossip...
[2024-04-19 19:36:13,283: DEBUG/MainProcess] | Consumer: Stopping Mingle...
[2024-04-19 19:36:13,283: DEBUG/MainProcess] | Consumer: Stopping Heart...
[2024-04-19 19:36:13,284: DEBUG/MainProcess] | Consumer: Stopping Events...
[2024-04-19 19:36:13,284: DEBUG/MainProcess] | Consumer: Stopping Connection...
[2024-04-19 19:36:13,284: DEBUG/MainProcess] | Worker: Stopping Pool...
[2024-04-19 19:36:14,351: DEBUG/MainProcess] | Worker: Stopping Hub...
[2024-04-19 19:36:14,351: DEBUG/MainProcess] | Consumer: Shutdown Control...
[2024-04-19 19:36:14,351: DEBUG/MainProcess] | Consumer: Shutdown Tasks...
[2024-04-19 19:36:14,351: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 19:36:14,352: DEBUG/MainProcess] Closing consumer channel...
[2024-04-19 19:36:14,352: DEBUG/MainProcess] | Consumer: Shutdown Gossip...
[2024-04-19 19:36:14,352: DEBUG/MainProcess] | Consumer: Shutdown Heart...
[2024-04-19 19:36:14,352: DEBUG/MainProcess] | Consumer: Shutdown Events...
[2024-04-19 19:36:14,352: DEBUG/MainProcess] | Consumer: Shutdown Connection...
[2024-04-19 19:36:14,353: DEBUG/MainProcess] removing tasks from inqueue until task handler finished
[2024-04-19 19:36:37,843: DEBUG/MainProcess] | Worker: Preparing bootsteps.
[2024-04-19 19:36:37,844: DEBUG/MainProcess] | Worker: Building graph...
[2024-04-19 19:36:37,845: DEBUG/MainProcess] | Worker: New boot order: {Timer, Hub, Pool, Autoscaler, StateDB, Beat, Consumer}
[2024-04-19 19:36:37,852: DEBUG/MainProcess] | Consumer: Preparing bootsteps.
[2024-04-19 19:36:37,852: DEBUG/MainProcess] | Consumer: Building graph...
[2024-04-19 19:36:37,888: DEBUG/MainProcess] | Consumer: New boot order: {Connection, Agent, Events, Mingle, Gossip, Tasks, Control, Heart, event loop}
[2024-04-19 19:36:37,926: DEBUG/MainProcess] | Worker: Starting Hub
[2024-04-19 19:36:37,926: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:36:37,926: DEBUG/MainProcess] | Worker: Starting Pool
[2024-04-19 19:36:38,067: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:36:38,067: DEBUG/MainProcess] | Worker: Starting Consumer
[2024-04-19 19:36:38,067: DEBUG/MainProcess] | Consumer: Starting Connection
[2024-04-19 19:36:38,069: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 19:36:38,074: INFO/MainProcess] Connected to redis://10.0.15.135:6379/0
[2024-04-19 19:36:38,074: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:36:38,074: DEBUG/MainProcess] | Consumer: Starting Events
[2024-04-19 19:36:38,075: WARNING/MainProcess] /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/worker/consumer/consumer.py:508: CPendingDeprecationWarning: The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to retain the existing behavior for retrying connections on startup,
you should set broker_connection_retry_on_startup to True.
  warnings.warn(

[2024-04-19 19:36:38,076: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:36:38,076: DEBUG/MainProcess] | Consumer: Starting Mingle
[2024-04-19 19:36:38,077: INFO/MainProcess] mingle: searching for neighbors
[2024-04-19 19:36:39,083: INFO/MainProcess] mingle: all alone
[2024-04-19 19:36:39,084: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:36:39,084: DEBUG/MainProcess] | Consumer: Starting Gossip
[2024-04-19 19:36:39,087: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:36:39,087: DEBUG/MainProcess] | Consumer: Starting Tasks
[2024-04-19 19:36:39,090: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:36:39,090: DEBUG/MainProcess] | Consumer: Starting Control
[2024-04-19 19:36:39,093: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:36:39,093: DEBUG/MainProcess] | Consumer: Starting Heart
[2024-04-19 19:36:39,094: DEBUG/MainProcess] ^-- substep ok
[2024-04-19 19:36:39,095: DEBUG/MainProcess] | Consumer: Starting event loop
[2024-04-19 19:36:39,095: DEBUG/MainProcess] | Worker: Hub.register Pool...
[2024-04-19 19:36:39,095: INFO/MainProcess] celery@ip-10-0-15-135.eu-west-2.compute.internal ready.
[2024-04-19 19:36:39,095: DEBUG/MainProcess] basic.qos: prefetch_count->16
[2024-04-19 19:36:40,514: DEBUG/ForkPoolWorker-2] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:36:40,515: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:36:40,519: DEBUG/ForkPoolWorker-3] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:36:40,520: DEBUG/ForkPoolWorker-4] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:36:40,647: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/preprocessor_config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,649: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/preprocessor_config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,653: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/preprocessor_config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,655: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/preprocessor_config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,738: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/tokenizer_config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,743: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/tokenizer_config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,749: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/tokenizer_config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,750: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/tokenizer_config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,864: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/processor_config.json HTTP/1.1" 404 0
[2024-04-19 19:36:40,873: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/processor_config.json HTTP/1.1" 404 0
[2024-04-19 19:36:40,874: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/processor_config.json HTTP/1.1" 404 0
[2024-04-19 19:36:40,905: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/processor_config.json HTTP/1.1" 404 0
[2024-04-19 19:36:40,972: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,978: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:36:40,991: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:36:41,012: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:36:41,067: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:36:41,070: DEBUG/ForkPoolWorker-4] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:36:41,078: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:36:41,082: DEBUG/ForkPoolWorker-1] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:36:41,103: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:36:41,107: DEBUG/ForkPoolWorker-2] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:36:41,186: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/model.safetensors HTTP/1.1" 404 0
[2024-04-19 19:36:41,196: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/model.safetensors HTTP/1.1" 404 0
[2024-04-19 19:36:41,219: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/model.safetensors HTTP/1.1" 404 0
[2024-04-19 19:36:41,223: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/config.json HTTP/1.1" 200 0
[2024-04-19 19:36:41,228: DEBUG/ForkPoolWorker-3] Starting new HTTPS connection (1): huggingface.co:443
[2024-04-19 19:36:41,367: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/model.safetensors HTTP/1.1" 404 0
[2024-04-19 19:36:48,453: DEBUG/ForkPoolWorker-3] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/generation_config.json HTTP/1.1" 404 0
[2024-04-19 19:36:48,454: DEBUG/ForkPoolWorker-2] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/generation_config.json HTTP/1.1" 404 0
[2024-04-19 19:36:48,475: DEBUG/ForkPoolWorker-4] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/generation_config.json HTTP/1.1" 404 0
[2024-04-19 19:36:48,546: DEBUG/ForkPoolWorker-1] https://huggingface.co:443 "HEAD /Salesforce/blip-image-captioning-base/resolve/main/generation_config.json HTTP/1.1" 404 0
[2024-04-19 19:36:54,456: INFO/MainProcess] Task app.fetch_and_process_image[335370a5-a7ea-42ff-9aeb-91a0f89703b5] received
[2024-04-19 19:36:54,456: DEBUG/MainProcess] TaskPool: Apply <function fast_trace_task at 0x7fc0c9fa9550> (args:('app.fetch_and_process_image', '335370a5-a7ea-42ff-9aeb-91a0f89703b5', {'lang': 'py', 'task': 'app.fetch_and_process_image', 'id': '335370a5-a7ea-42ff-9aeb-91a0f89703b5', 'shadow': None, 'eta': None, 'expires': None, 'group': None, 'group_index': None, 'retries': 0, 'timelimit': [None, None], 'root_id': '335370a5-a7ea-42ff-9aeb-91a0f89703b5', 'parent_id': None, 'argsrepr': "('http://images.cocodataset.org/unlabeled2017/000000369694.jpg',)", 'kwargsrepr': '{}', 'origin': 'gen1091252@ip-10-0-15-46.eu-west-2.compute.internal', 'ignore_result': False, 'replaced_task_nesting': 0, 'stamped_headers': None, 'stamps': {}, 'properties': {'correlation_id': '335370a5-a7ea-42ff-9aeb-91a0f89703b5', 'reply_to': '2aa0a8e0-de0e-350c-90a7-78995e14a373', 'delivery_mode': 2, 'delivery_info': {'exchange': '', 'routing_key': 'celery'}, 'priority': 0, 'body_encoding': 'base64', 'delivery_tag': '7b1cbabe-042e-43d3-90fb-5f93f1b0ae95'}, 'reply_to': '2aa0a8e0-de0e-350c-90a7-78995e14a373', 'correlation_id':... kwargs:{})
[2024-04-19 19:36:54,459: DEBUG/ForkPoolWorker-3] Starting new HTTP connection (1): images.cocodataset.org:80
[2024-04-19 19:36:54,696: DEBUG/ForkPoolWorker-3] http://images.cocodataset.org:80 "GET /unlabeled2017/000000369694.jpg HTTP/1.1" 200 142969
[2024-04-19 19:36:54,921: DEBUG/ForkPoolWorker-3] Opting out of CRT Transfer Manager. Preferred client: auto, CRT available: False, Instance Optimized: False.
[2024-04-19 19:36:54,921: DEBUG/ForkPoolWorker-3] Using default client. pid: 1707055, thread: 140466035308352
[2024-04-19 19:36:54,922: DEBUG/ForkPoolWorker-3] Acquiring 0
[2024-04-19 19:36:54,922: DEBUG/ForkPoolWorker-3] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7fc01151cb80>}) about to wait for the following futures []
[2024-04-19 19:36:54,922: DEBUG/ForkPoolWorker-3] UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7fc01151cb80>}) done waiting for dependent futures
[2024-04-19 19:36:54,922: DEBUG/ForkPoolWorker-3] Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7fc01151cb80>}) with kwargs {'client': <botocore.client.S3 object at 0x7fc0c82cff40>, 'config': <boto3.s3.transfer.TransferConfig object at 0x7fc0114fe280>, 'osutil': <s3transfer.utils.OSUtils object at 0x7fc0114fe0a0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x7fc011511f40>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x7fc01151cb80>}
[2024-04-19 19:36:54,922: DEBUG/ForkPoolWorker-3] Submitting task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x7fc011511f40> for transfer request: 0.
[2024-04-19 19:36:54,923: DEBUG/ForkPoolWorker-3] Acquiring 0
[2024-04-19 19:36:54,923: DEBUG/ForkPoolWorker-3] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) about to wait for the following futures []
[2024-04-19 19:36:54,923: DEBUG/ForkPoolWorker-3] Releasing acquire 0/None
[2024-04-19 19:36:54,923: DEBUG/ForkPoolWorker-3] PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) done waiting for dependent futures
[2024-04-19 19:36:54,923: DEBUG/ForkPoolWorker-3] Executing task PutObjectTask(transfer_id=0, {'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x7fc0c82cff40>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7fc01151c130>, 'bucket': 'comp0239-ucabrz5', 'key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'extra_args': {}}
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x7fc0c8bc1280>
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x7fc0c8c3c670>
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x7fc0c8bc1b80>
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x7fc0c8c3c5e0>
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7fc0c8bc2430>
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7fc0c8086c70>>
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.PutObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7fc0c8b27130>>
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x7fc0c8c3c430>
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7fc0c8bc25e0>
[2024-04-19 19:36:54,924: DEBUG/ForkPoolWorker-3] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7fc0c8086c70>>
[2024-04-19 19:36:54,925: DEBUG/ForkPoolWorker-3] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'us-east-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 19:36:54,925: DEBUG/ForkPoolWorker-3] Endpoint provider result: https://comp0239-ucabrz5.s3.amazonaws.com
[2024-04-19 19:36:54,925: DEBUG/ForkPoolWorker-3] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 19:36:54,925: DEBUG/ForkPoolWorker-3] Selected auth type "v4" as "v4" with signing context params: {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 19:36:54,926: DEBUG/ForkPoolWorker-3] Event before-call.s3.PutObject: calling handler <function conditionally_calculate_checksum at 0x7fc0c8d50790>
[2024-04-19 19:36:54,926: DEBUG/ForkPoolWorker-3] Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x7fc0c8c3c940>
[2024-04-19 19:36:54,926: DEBUG/ForkPoolWorker-3] Adding expect 100 continue header to request.
[2024-04-19 19:36:54,926: DEBUG/ForkPoolWorker-3] Event before-call.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7fc0c8086ca0>>
[2024-04-19 19:36:54,926: DEBUG/ForkPoolWorker-3] Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x7fc0c8c3c0d0>
[2024-04-19 19:36:54,926: DEBUG/ForkPoolWorker-3] Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x7fc0c8bc1ca0>
[2024-04-19 19:36:54,926: DEBUG/ForkPoolWorker-3] Making request for OperationModel(name=PutObject) with params: {'url_path': '/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': 'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x7fc01151c130>, 'auth_path': '/comp0239-ucabrz5/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'url': 'https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7fc0c8256370>, 'has_streaming_input': True, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7fc01151c130>}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}, 'signing': {'region': 'us-east-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'us-east-1'}]}}}
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7fc0c81d8b80>
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7fc0c8256310>>
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7fc0c8b27130>>
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7fc0c8c3c310>
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7fc0c8bc2550>
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7fc0c8086ca0>>
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] Calculating signature using v4 auth.
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] CanonicalRequest:
PUT
/54ae161caf12eb6bc208836b44ed8f0d.jpg

content-md5:VK4WHK8S62vCCINrRO2PDQ==
host:comp0239-ucabrz5.s3.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T193654Z
x-amz-security-token:IQoJb3JpZ2luX2VjENP//////////wEaCWV1LXdlc3QtMiJHMEUCIEhFQFfPpMDptwIndIQUqhxhnEep+JRV6tCP5XWGFm+vAiEAm7mhus0A9P1QOV7wzBNX8velh8zrWWQezagLY4rUgVEquwUIHBAAGgw2ODg0ODQzNzIwMDQiDMCaPU9lk74CRxhGcSqYBdj1jpwJo4N7+Bzw+7GPzajPXMGeFTJO71FyV2dXIDaakZJbcpzOcNR2L5ULqBUItUw244LUarVd10qKZ9IL/1Pnk5K4uyqPE0VhPPEKAiDro+xtEzt/Z3wNmofxjklt2AGfc3BRZJWKLO1vZbshvdU0FqfzgeEN+Xgxffh1nP14ObKHFBDLylsk4FAKi8ZlpqE/qeW5t48cnxW/LUXp/nQBa+OX4kYfhBBLuXUDCmobQDDdfj3TXYDDZtXXejX9IV1850Q+efI/xUVvqp4PPpckHkYyItw3Lihqxr7jJF04xvZ9XwLd5Rhfi1vtGLIOagNX5kaFqNEIRfdujua8XgeGPdmX0a7Ua9G5QnlEwa4M2f7/qBasUcfGjWsglJ99PMT2fZXjaQAU6jNCuhFgQ0T/jp+pO1qZxC2jbXETI5IwsKABhOo9TDsh9BRhb9btzsP/PUmF1wr7nuzowBDr5g+tt5ppGWEorsND4SIOSEhve29wWvNCgvUSB9mxoWF6palCdO0L4ywQU0xz5r177T/jI6NR1B1Ctf7kHdoi+kNJYa6sPPtLkxIW4npdspNge8IMCFRMXnHfLDsRKoPTuUM3d5W7ZZbVtzvj9QZuePgioS+g4CHKYoxBO57STXU6djD/QPjfnu0vTpAFZnAGMsnsNIf6HBzKR+T3Zcs9dmMqy7daEkvsna9aSDNOGihIxZ2pJZA6i2Z/uXqk6UzNi66pxvX+fxEsfUUhchIHDdVRXX4pX397EsDxKNby3kLxi8KWDn2MVxsBwuONrmQdRIfYwJ0gIvQF2de/BU3HNHAT1u46l2hMGJ9nc20vrdOPpbOetcnFxGlboPs1EhQQM504Zu2RG/uLWn6/SI3ksRjg6gkT7xeM7eswr/SKsQY6sQF9M/AroEzlUCFYex1XtF5z5tIInmTbacfCIvjymseyCqWV8ZDtcbZkImhWw1Oq8L8dX7rHv7izD+nJy9zc1hRDUxynvakFhFUUvoJUj89FE9VTsVeYHhcq/o7bJi4o8L+ugOVmZ78QJ0+LSO6uSeji++vnNBM0ynx6JA6k0iyoK+RBSfXlky+WIe/eELCnTCbtPkACC6iJoWKlm+C5ZaNMOMK4k3O6Yy1j1E3HWpbLX50=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] StringToSign:
AWS4-HMAC-SHA256
20240419T193654Z
20240419/us-east-1/s3/aws4_request
4e93bacff627d972519b7c8763fd584b699212cd57d102564a17b14edcb5f46c
[2024-04-19 19:36:54,927: DEBUG/ForkPoolWorker-3] Signature:
b424df8a7b004cd40f208112d468fa826f8952e5fe5b788a50e11860e7f31c96
[2024-04-19 19:36:54,928: DEBUG/ForkPoolWorker-3] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7fc0c81d8c10>
[2024-04-19 19:36:54,928: DEBUG/ForkPoolWorker-3] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7fc0c8bc23a0>
[2024-04-19 19:36:54,928: DEBUG/ForkPoolWorker-3] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T193654Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENP//////////wEaCWV1LXdlc3QtMiJHMEUCIEhFQFfPpMDptwIndIQUqhxhnEep+JRV6tCP5XWGFm+vAiEAm7mhus0A9P1QOV7wzBNX8velh8zrWWQezagLY4rUgVEquwUIHBAAGgw2ODg0ODQzNzIwMDQiDMCaPU9lk74CRxhGcSqYBdj1jpwJo4N7+Bzw+7GPzajPXMGeFTJO71FyV2dXIDaakZJbcpzOcNR2L5ULqBUItUw244LUarVd10qKZ9IL/1Pnk5K4uyqPE0VhPPEKAiDro+xtEzt/Z3wNmofxjklt2AGfc3BRZJWKLO1vZbshvdU0FqfzgeEN+Xgxffh1nP14ObKHFBDLylsk4FAKi8ZlpqE/qeW5t48cnxW/LUXp/nQBa+OX4kYfhBBLuXUDCmobQDDdfj3TXYDDZtXXejX9IV1850Q+efI/xUVvqp4PPpckHkYyItw3Lihqxr7jJF04xvZ9XwLd5Rhfi1vtGLIOagNX5kaFqNEIRfdujua8XgeGPdmX0a7Ua9G5QnlEwa4M2f7/qBasUcfGjWsglJ99PMT2fZXjaQAU6jNCuhFgQ0T/jp+pO1qZxC2jbXETI5IwsKABhOo9TDsh9BRhb9btzsP/PUmF1wr7nuzowBDr5g+tt5ppGWEorsND4SIOSEhve29wWvNCgvUSB9mxoWF6palCdO0L4ywQU0xz5r177T/jI6NR1B1Ctf7kHdoi+kNJYa6sPPtLkxIW4npdspNge8IMCFRMXnHfLDsRKoPTuUM3d5W7ZZbVtzvj9QZuePgioS+g4CHKYoxBO57STXU6djD/QPjfnu0vTpAFZnAGMsnsNIf6HBzKR+T3Zcs9dmMqy7daEkvsna9aSDNOGihIxZ2pJZA6i2Z/uXqk6UzNi66pxvX+fxEsfUUhchIHDdVRXX4pX397EsDxKNby3kLxi8KWDn2MVxsBwuONrmQdRIfYwJ0gIvQF2de/BU3HNHAT1u46l2hMGJ9nc20vrdOPpbOetcnFxGlboPs1EhQQM504Zu2RG/uLWn6/SI3ksRjg6gkT7xeM7eswr/SKsQY6sQF9M/AroEzlUCFYex1XtF5z5tIInmTbacfCIvjymseyCqWV8ZDtcbZkImhWw1Oq8L8dX7rHv7izD+nJy9zc1hRDUxynvakFhFUUvoJUj89FE9VTsVeYHhcq/o7bJi4o8L+ugOVmZ78QJ0+LSO6uSeji++vnNBM0ynx6JA6k0iyoK+RBSfXlky+WIe/eELCnTCbtPkACC6iJoWKlm+C5ZaNMOMK4k3O6Yy1j1E3HWpbLX50=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSLE6QH7MB/20240419/us-east-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=b424df8a7b004cd40f208112d468fa826f8952e5fe5b788a50e11860e7f31c96', 'amz-sdk-invocation-id': b'9fcba474-f214-4226-b001-d7d16af9c251', 'amz-sdk-request': b'attempt=1', 'Content-Length': '142969'}>
[2024-04-19 19:36:54,928: DEBUG/ForkPoolWorker-3] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 19:36:54,928: DEBUG/ForkPoolWorker-3] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.amazonaws.com:443
[2024-04-19 19:36:54,955: DEBUG/ForkPoolWorker-3] Waiting for 100 Continue response.
[2024-04-19 19:36:54,958: DEBUG/ForkPoolWorker-3] Received a non 100 Continue response from the server, NOT sending request body.
[2024-04-19 19:36:54,958: DEBUG/ForkPoolWorker-3] https://comp0239-ucabrz5.s3.amazonaws.com:443 "PUT /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 400 None
[2024-04-19 19:36:54,958: DEBUG/ForkPoolWorker-3] Response headers: {'x-amz-request-id': 'W92MJYCJ7TC5CJR3', 'x-amz-id-2': 'sUsrNU3T8eS3kiZs/YyAVEOX57zT7E+WfEwsqLxwqgZ7J5iYEUs6Ty6//+kecseI/Vb/mWk+iCw=', 'Content-Type': 'application/xml', 'Transfer-Encoding': 'chunked', 'Date': 'Fri, 19 Apr 2024 19:36:54 GMT', 'Server': 'AmazonS3', 'Connection': 'close'}
[2024-04-19 19:36:54,958: DEBUG/ForkPoolWorker-3] Response body:
b'<?xml version="1.0" encoding="UTF-8"?>\n<Error><Code>AuthorizationHeaderMalformed</Code><Message>The authorization header is malformed; the region \'us-east-1\' is wrong; expecting \'eu-west-2\'</Message><Region>eu-west-2</Region><RequestId>W92MJYCJ7TC5CJR3</RequestId><HostId>sUsrNU3T8eS3kiZs/YyAVEOX57zT7E+WfEwsqLxwqgZ7J5iYEUs6Ty6//+kecseI/Vb/mWk+iCw=</HostId></Error>'
[2024-04-19 19:36:54,961: DEBUG/ForkPoolWorker-3] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7fc0c8086bb0>
[2024-04-19 19:36:54,961: DEBUG/ForkPoolWorker-3] No retry needed.
[2024-04-19 19:36:54,961: DEBUG/ForkPoolWorker-3] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7fc0c8086c70>>
[2024-04-19 19:36:54,961: DEBUG/ForkPoolWorker-3] S3 client configured for region us-east-1 but the bucket comp0239-ucabrz5 is in region eu-west-2; Please configure the proper region to avoid multiple unnecessary redirects and signing attempts.
[2024-04-19 19:36:54,962: DEBUG/ForkPoolWorker-3] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7fc0c8bc25e0>
[2024-04-19 19:36:54,962: DEBUG/ForkPoolWorker-3] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7fc0c8086c70>>
[2024-04-19 19:36:54,962: DEBUG/ForkPoolWorker-3] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 19:36:54,962: DEBUG/ForkPoolWorker-3] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 19:36:54,962: DEBUG/ForkPoolWorker-3] Updating URI from https://comp0239-ucabrz5.s3.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg to https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg
[2024-04-19 19:36:54,962: DEBUG/ForkPoolWorker-3] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 19:36:54,962: DEBUG/ForkPoolWorker-3] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 19:36:54,962: DEBUG/ForkPoolWorker-3] Response received to retry, sleeping for 0 seconds
[2024-04-19 19:36:54,963: DEBUG/ForkPoolWorker-3] Rewinding stream: <s3transfer.utils.ReadFileChunk object at 0x7fc01151c130>
[2024-04-19 19:36:54,963: DEBUG/ForkPoolWorker-3] Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7fc0c81d8b80>
[2024-04-19 19:36:54,963: DEBUG/ForkPoolWorker-3] Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7fc0c8256310>>
[2024-04-19 19:36:54,963: DEBUG/ForkPoolWorker-3] Event choose-signer.s3.PutObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7fc0c8b27130>>
[2024-04-19 19:36:54,963: DEBUG/ForkPoolWorker-3] Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7fc0c8c3c310>
[2024-04-19 19:36:54,963: DEBUG/ForkPoolWorker-3] Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7fc0c8bc2550>
[2024-04-19 19:36:54,963: DEBUG/ForkPoolWorker-3] Event before-sign.s3.PutObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7fc0c8086ca0>>
[2024-04-19 19:36:54,964: DEBUG/ForkPoolWorker-3] Calculating signature using v4 auth.
[2024-04-19 19:36:54,964: DEBUG/ForkPoolWorker-3] CanonicalRequest:
PUT
/54ae161caf12eb6bc208836b44ed8f0d.jpg

content-md5:VK4WHK8S62vCCINrRO2PDQ==
host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20240419T193654Z
x-amz-security-token:IQoJb3JpZ2luX2VjENP//////////wEaCWV1LXdlc3QtMiJHMEUCIEhFQFfPpMDptwIndIQUqhxhnEep+JRV6tCP5XWGFm+vAiEAm7mhus0A9P1QOV7wzBNX8velh8zrWWQezagLY4rUgVEquwUIHBAAGgw2ODg0ODQzNzIwMDQiDMCaPU9lk74CRxhGcSqYBdj1jpwJo4N7+Bzw+7GPzajPXMGeFTJO71FyV2dXIDaakZJbcpzOcNR2L5ULqBUItUw244LUarVd10qKZ9IL/1Pnk5K4uyqPE0VhPPEKAiDro+xtEzt/Z3wNmofxjklt2AGfc3BRZJWKLO1vZbshvdU0FqfzgeEN+Xgxffh1nP14ObKHFBDLylsk4FAKi8ZlpqE/qeW5t48cnxW/LUXp/nQBa+OX4kYfhBBLuXUDCmobQDDdfj3TXYDDZtXXejX9IV1850Q+efI/xUVvqp4PPpckHkYyItw3Lihqxr7jJF04xvZ9XwLd5Rhfi1vtGLIOagNX5kaFqNEIRfdujua8XgeGPdmX0a7Ua9G5QnlEwa4M2f7/qBasUcfGjWsglJ99PMT2fZXjaQAU6jNCuhFgQ0T/jp+pO1qZxC2jbXETI5IwsKABhOo9TDsh9BRhb9btzsP/PUmF1wr7nuzowBDr5g+tt5ppGWEorsND4SIOSEhve29wWvNCgvUSB9mxoWF6palCdO0L4ywQU0xz5r177T/jI6NR1B1Ctf7kHdoi+kNJYa6sPPtLkxIW4npdspNge8IMCFRMXnHfLDsRKoPTuUM3d5W7ZZbVtzvj9QZuePgioS+g4CHKYoxBO57STXU6djD/QPjfnu0vTpAFZnAGMsnsNIf6HBzKR+T3Zcs9dmMqy7daEkvsna9aSDNOGihIxZ2pJZA6i2Z/uXqk6UzNi66pxvX+fxEsfUUhchIHDdVRXX4pX397EsDxKNby3kLxi8KWDn2MVxsBwuONrmQdRIfYwJ0gIvQF2de/BU3HNHAT1u46l2hMGJ9nc20vrdOPpbOetcnFxGlboPs1EhQQM504Zu2RG/uLWn6/SI3ksRjg6gkT7xeM7eswr/SKsQY6sQF9M/AroEzlUCFYex1XtF5z5tIInmTbacfCIvjymseyCqWV8ZDtcbZkImhWw1Oq8L8dX7rHv7izD+nJy9zc1hRDUxynvakFhFUUvoJUj89FE9VTsVeYHhcq/o7bJi4o8L+ugOVmZ78QJ0+LSO6uSeji++vnNBM0ynx6JA6k0iyoK+RBSfXlky+WIe/eELCnTCbtPkACC6iJoWKlm+C5ZaNMOMK4k3O6Yy1j1E3HWpbLX50=

content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token
UNSIGNED-PAYLOAD
[2024-04-19 19:36:54,964: DEBUG/ForkPoolWorker-3] StringToSign:
AWS4-HMAC-SHA256
20240419T193654Z
20240419/eu-west-2/s3/aws4_request
70644f9698d97983f57e82822f70735f5a153707b11c96e118c9bb0257cad638
[2024-04-19 19:36:54,964: DEBUG/ForkPoolWorker-3] Signature:
c3f2b42915798ced5e1c48982fb27dbb1249c52d98096023ec8bc54717ac5107
[2024-04-19 19:36:54,964: DEBUG/ForkPoolWorker-3] Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7fc0c81d8c10>
[2024-04-19 19:36:54,964: DEBUG/ForkPoolWorker-3] Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7fc0c8bc23a0>
[2024-04-19 19:36:54,964: DEBUG/ForkPoolWorker-3] Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'Content-MD5': b'VK4WHK8S62vCCINrRO2PDQ==', 'Expect': b'100-continue', 'X-Amz-Date': b'20240419T193654Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENP//////////wEaCWV1LXdlc3QtMiJHMEUCIEhFQFfPpMDptwIndIQUqhxhnEep+JRV6tCP5XWGFm+vAiEAm7mhus0A9P1QOV7wzBNX8velh8zrWWQezagLY4rUgVEquwUIHBAAGgw2ODg0ODQzNzIwMDQiDMCaPU9lk74CRxhGcSqYBdj1jpwJo4N7+Bzw+7GPzajPXMGeFTJO71FyV2dXIDaakZJbcpzOcNR2L5ULqBUItUw244LUarVd10qKZ9IL/1Pnk5K4uyqPE0VhPPEKAiDro+xtEzt/Z3wNmofxjklt2AGfc3BRZJWKLO1vZbshvdU0FqfzgeEN+Xgxffh1nP14ObKHFBDLylsk4FAKi8ZlpqE/qeW5t48cnxW/LUXp/nQBa+OX4kYfhBBLuXUDCmobQDDdfj3TXYDDZtXXejX9IV1850Q+efI/xUVvqp4PPpckHkYyItw3Lihqxr7jJF04xvZ9XwLd5Rhfi1vtGLIOagNX5kaFqNEIRfdujua8XgeGPdmX0a7Ua9G5QnlEwa4M2f7/qBasUcfGjWsglJ99PMT2fZXjaQAU6jNCuhFgQ0T/jp+pO1qZxC2jbXETI5IwsKABhOo9TDsh9BRhb9btzsP/PUmF1wr7nuzowBDr5g+tt5ppGWEorsND4SIOSEhve29wWvNCgvUSB9mxoWF6palCdO0L4ywQU0xz5r177T/jI6NR1B1Ctf7kHdoi+kNJYa6sPPtLkxIW4npdspNge8IMCFRMXnHfLDsRKoPTuUM3d5W7ZZbVtzvj9QZuePgioS+g4CHKYoxBO57STXU6djD/QPjfnu0vTpAFZnAGMsnsNIf6HBzKR+T3Zcs9dmMqy7daEkvsna9aSDNOGihIxZ2pJZA6i2Z/uXqk6UzNi66pxvX+fxEsfUUhchIHDdVRXX4pX397EsDxKNby3kLxi8KWDn2MVxsBwuONrmQdRIfYwJ0gIvQF2de/BU3HNHAT1u46l2hMGJ9nc20vrdOPpbOetcnFxGlboPs1EhQQM504Zu2RG/uLWn6/SI3ksRjg6gkT7xeM7eswr/SKsQY6sQF9M/AroEzlUCFYex1XtF5z5tIInmTbacfCIvjymseyCqWV8ZDtcbZkImhWw1Oq8L8dX7rHv7izD+nJy9zc1hRDUxynvakFhFUUvoJUj89FE9VTsVeYHhcq/o7bJi4o8L+ugOVmZ78QJ0+LSO6uSeji++vnNBM0ynx6JA6k0iyoK+RBSfXlky+WIe/eELCnTCbtPkACC6iJoWKlm+C5ZaNMOMK4k3O6Yy1j1E3HWpbLX50=', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSLE6QH7MB/20240419/eu-west-2/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=c3f2b42915798ced5e1c48982fb27dbb1249c52d98096023ec8bc54717ac5107', 'amz-sdk-invocation-id': b'9fcba474-f214-4226-b001-d7d16af9c251', 'amz-sdk-request': b'ttl=20240419T193754Z; attempt=2; max=5', 'Content-Length': '142969'}>
[2024-04-19 19:36:54,964: DEBUG/ForkPoolWorker-3] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 19:36:54,965: DEBUG/ForkPoolWorker-3] Starting new HTTPS connection (1): comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443
[2024-04-19 19:36:54,993: DEBUG/ForkPoolWorker-3] Waiting for 100 Continue response.
[2024-04-19 19:36:55,021: DEBUG/ForkPoolWorker-3] 100 Continue response seen, now sending request body.
[2024-04-19 19:36:55,045: DEBUG/ForkPoolWorker-3] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "PUT /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 200 0
[2024-04-19 19:36:55,046: DEBUG/ForkPoolWorker-3] Response headers: {'x-amz-id-2': 'PNP0RqETjQN3a4nOzVXkjFs+hOBxzgrVwFOBfc9GO/Rwn83UfC5t4TNIHEIOqPuggzDTqbf1DkFX/kIyBfpt/w==', 'x-amz-request-id': 'W92P4WBQ6N205V7V', 'Date': 'Fri, 19 Apr 2024 19:36:55 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"54ae161caf12eb6bc208836b44ed8f0d"', 'Server': 'AmazonS3', 'Content-Length': '0'}
[2024-04-19 19:36:55,046: DEBUG/ForkPoolWorker-3] Response body:
b''
[2024-04-19 19:36:55,046: DEBUG/ForkPoolWorker-3] Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7fc0c8086bb0>
[2024-04-19 19:36:55,046: DEBUG/ForkPoolWorker-3] No retry needed.
[2024-04-19 19:36:55,046: DEBUG/ForkPoolWorker-3] Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7fc0c8086c70>>
[2024-04-19 19:36:55,046: DEBUG/ForkPoolWorker-3] S3 request was previously redirected, not redirecting.
[2024-04-19 19:36:55,047: DEBUG/ForkPoolWorker-3] Releasing acquire 0/None
[2024-04-19 19:36:55,058: INFO/ForkPoolWorker-3] app.process_image[None]: Processing image with key: 54ae161caf12eb6bc208836b44ed8f0d.jpg
[2024-04-19 19:36:55,058: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.GetObject: calling handler <function sse_md5 at 0x7fc0c8c3c670>
[2024-04-19 19:36:55,058: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.GetObject: calling handler <function validate_bucket_name at 0x7fc0c8c3c5e0>
[2024-04-19 19:36:55,058: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.GetObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7fc0c8bc2430>
[2024-04-19 19:36:55,058: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7fc0c8086c70>>
[2024-04-19 19:36:55,058: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.GetObject: calling handler <bound method ClientCreator._inject_s3_input_parameters of <botocore.client.ClientCreator object at 0x7fc0c8b27130>>
[2024-04-19 19:36:55,058: DEBUG/ForkPoolWorker-3] Event before-parameter-build.s3.GetObject: calling handler <function generate_idempotent_uuid at 0x7fc0c8c3c430>
[2024-04-19 19:36:55,058: DEBUG/ForkPoolWorker-3] Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7fc0c8bc25e0>
[2024-04-19 19:36:55,058: DEBUG/ForkPoolWorker-3] Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7fc0c8086c70>>
[2024-04-19 19:36:55,059: DEBUG/ForkPoolWorker-3] Calling endpoint provider with parameters: {'Bucket': 'comp0239-ucabrz5', 'Region': 'eu-west-2', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': True, 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg', 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
[2024-04-19 19:36:55,059: DEBUG/ForkPoolWorker-3] Endpoint provider result: https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
[2024-04-19 19:36:55,059: DEBUG/ForkPoolWorker-3] Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
[2024-04-19 19:36:55,059: DEBUG/ForkPoolWorker-3] Selected auth type "v4" as "v4" with signing context params: {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}
[2024-04-19 19:36:55,059: DEBUG/ForkPoolWorker-3] Event before-call.s3.GetObject: calling handler <function add_expect_header at 0x7fc0c8c3c940>
[2024-04-19 19:36:55,059: DEBUG/ForkPoolWorker-3] Event before-call.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.apply_signing_cache_key of <botocore.utils.S3ExpressIdentityResolver object at 0x7fc0c8086ca0>>
[2024-04-19 19:36:55,059: DEBUG/ForkPoolWorker-3] Event before-call.s3.GetObject: calling handler <function add_recursion_detection_header at 0x7fc0c8c3c0d0>
[2024-04-19 19:36:55,059: DEBUG/ForkPoolWorker-3] Event before-call.s3.GetObject: calling handler <function inject_api_version_header_if_needed at 0x7fc0c8bc1ca0>
[2024-04-19 19:36:55,059: DEBUG/ForkPoolWorker-3] Making request for OperationModel(name=GetObject) with params: {'url_path': '/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'query_string': {}, 'method': 'GET', 'headers': {'User-Agent': 'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87'}, 'body': b'', 'auth_path': '/comp0239-ucabrz5/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'url': 'https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg', 'context': {'client_region': 'us-east-1', 'client_config': <botocore.config.Config object at 0x7fc0c8256370>, 'has_streaming_input': False, 'auth_type': 'v4', 's3_redirect': {'redirected': False, 'bucket': 'comp0239-ucabrz5', 'params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}}, 'input_params': {'Bucket': 'comp0239-ucabrz5', 'Key': '54ae161caf12eb6bc208836b44ed8f0d.jpg'}, 'signing': {'region': 'eu-west-2', 'signing_name': 's3', 'disableDoubleEncoding': True}, 'endpoint_properties': {'authSchemes': [{'disableDoubleEncoding': True, 'name': 'sigv4', 'signingName': 's3', 'signingRegion': 'eu-west-2'}]}}}
[2024-04-19 19:36:55,060: DEBUG/ForkPoolWorker-3] Event request-created.s3.GetObject: calling handler <function signal_not_transferring at 0x7fc0c81d8b80>
[2024-04-19 19:36:55,060: DEBUG/ForkPoolWorker-3] Event request-created.s3.GetObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7fc0c8256310>>
[2024-04-19 19:36:55,060: DEBUG/ForkPoolWorker-3] Event choose-signer.s3.GetObject: calling handler <bound method ClientCreator._default_s3_presign_to_sigv2 of <botocore.client.ClientCreator object at 0x7fc0c8b27130>>
[2024-04-19 19:36:55,060: DEBUG/ForkPoolWorker-3] Event choose-signer.s3.GetObject: calling handler <function set_operation_specific_signer at 0x7fc0c8c3c310>
[2024-04-19 19:36:55,060: DEBUG/ForkPoolWorker-3] Event before-sign.s3.GetObject: calling handler <function remove_arn_from_signing_path at 0x7fc0c8bc2550>
[2024-04-19 19:36:55,060: DEBUG/ForkPoolWorker-3] Event before-sign.s3.GetObject: calling handler <bound method S3ExpressIdentityResolver.resolve_s3express_identity of <botocore.utils.S3ExpressIdentityResolver object at 0x7fc0c8086ca0>>
[2024-04-19 19:36:55,061: DEBUG/ForkPoolWorker-3] Calculating signature using v4 auth.
[2024-04-19 19:36:55,061: DEBUG/ForkPoolWorker-3] CanonicalRequest:
GET
/54ae161caf12eb6bc208836b44ed8f0d.jpg

host:comp0239-ucabrz5.s3.eu-west-2.amazonaws.com
x-amz-content-sha256:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
x-amz-date:20240419T193655Z
x-amz-security-token:IQoJb3JpZ2luX2VjENP//////////wEaCWV1LXdlc3QtMiJHMEUCIEhFQFfPpMDptwIndIQUqhxhnEep+JRV6tCP5XWGFm+vAiEAm7mhus0A9P1QOV7wzBNX8velh8zrWWQezagLY4rUgVEquwUIHBAAGgw2ODg0ODQzNzIwMDQiDMCaPU9lk74CRxhGcSqYBdj1jpwJo4N7+Bzw+7GPzajPXMGeFTJO71FyV2dXIDaakZJbcpzOcNR2L5ULqBUItUw244LUarVd10qKZ9IL/1Pnk5K4uyqPE0VhPPEKAiDro+xtEzt/Z3wNmofxjklt2AGfc3BRZJWKLO1vZbshvdU0FqfzgeEN+Xgxffh1nP14ObKHFBDLylsk4FAKi8ZlpqE/qeW5t48cnxW/LUXp/nQBa+OX4kYfhBBLuXUDCmobQDDdfj3TXYDDZtXXejX9IV1850Q+efI/xUVvqp4PPpckHkYyItw3Lihqxr7jJF04xvZ9XwLd5Rhfi1vtGLIOagNX5kaFqNEIRfdujua8XgeGPdmX0a7Ua9G5QnlEwa4M2f7/qBasUcfGjWsglJ99PMT2fZXjaQAU6jNCuhFgQ0T/jp+pO1qZxC2jbXETI5IwsKABhOo9TDsh9BRhb9btzsP/PUmF1wr7nuzowBDr5g+tt5ppGWEorsND4SIOSEhve29wWvNCgvUSB9mxoWF6palCdO0L4ywQU0xz5r177T/jI6NR1B1Ctf7kHdoi+kNJYa6sPPtLkxIW4npdspNge8IMCFRMXnHfLDsRKoPTuUM3d5W7ZZbVtzvj9QZuePgioS+g4CHKYoxBO57STXU6djD/QPjfnu0vTpAFZnAGMsnsNIf6HBzKR+T3Zcs9dmMqy7daEkvsna9aSDNOGihIxZ2pJZA6i2Z/uXqk6UzNi66pxvX+fxEsfUUhchIHDdVRXX4pX397EsDxKNby3kLxi8KWDn2MVxsBwuONrmQdRIfYwJ0gIvQF2de/BU3HNHAT1u46l2hMGJ9nc20vrdOPpbOetcnFxGlboPs1EhQQM504Zu2RG/uLWn6/SI3ksRjg6gkT7xeM7eswr/SKsQY6sQF9M/AroEzlUCFYex1XtF5z5tIInmTbacfCIvjymseyCqWV8ZDtcbZkImhWw1Oq8L8dX7rHv7izD+nJy9zc1hRDUxynvakFhFUUvoJUj89FE9VTsVeYHhcq/o7bJi4o8L+ugOVmZ78QJ0+LSO6uSeji++vnNBM0ynx6JA6k0iyoK+RBSfXlky+WIe/eELCnTCbtPkACC6iJoWKlm+C5ZaNMOMK4k3O6Yy1j1E3HWpbLX50=

host;x-amz-content-sha256;x-amz-date;x-amz-security-token
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
[2024-04-19 19:36:55,061: DEBUG/ForkPoolWorker-3] StringToSign:
AWS4-HMAC-SHA256
20240419T193655Z
20240419/eu-west-2/s3/aws4_request
4a81e1731b1cda696bbd5b9463e259d19dc4ba3dbc95da55392564694fcc1f8d
[2024-04-19 19:36:55,061: DEBUG/ForkPoolWorker-3] Signature:
cbe75b8e5a20303f91c52fb09403c044596e17e29cc594c6005f7ef7daacb044
[2024-04-19 19:36:55,061: DEBUG/ForkPoolWorker-3] Event request-created.s3.GetObject: calling handler <function signal_transferring at 0x7fc0c81d8c10>
[2024-04-19 19:36:55,061: DEBUG/ForkPoolWorker-3] Event request-created.s3.GetObject: calling handler <function add_retry_headers at 0x7fc0c8bc23a0>
[2024-04-19 19:36:55,061: DEBUG/ForkPoolWorker-3] Sending http request: <AWSPreparedRequest stream_output=True, method=GET, url=https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com/54ae161caf12eb6bc208836b44ed8f0d.jpg, headers={'User-Agent': b'Boto3/1.34.87 md/Botocore#1.34.87 ua/2.0 os/linux#5.14.0-284.11.1.el9_2.x86_64 md/arch#x86_64 lang/python#3.9.18 md/pyimpl#CPython cfg/retry-mode#legacy Botocore/1.34.87', 'X-Amz-Date': b'20240419T193655Z', 'X-Amz-Security-Token': b'IQoJb3JpZ2luX2VjENP//////////wEaCWV1LXdlc3QtMiJHMEUCIEhFQFfPpMDptwIndIQUqhxhnEep+JRV6tCP5XWGFm+vAiEAm7mhus0A9P1QOV7wzBNX8velh8zrWWQezagLY4rUgVEquwUIHBAAGgw2ODg0ODQzNzIwMDQiDMCaPU9lk74CRxhGcSqYBdj1jpwJo4N7+Bzw+7GPzajPXMGeFTJO71FyV2dXIDaakZJbcpzOcNR2L5ULqBUItUw244LUarVd10qKZ9IL/1Pnk5K4uyqPE0VhPPEKAiDro+xtEzt/Z3wNmofxjklt2AGfc3BRZJWKLO1vZbshvdU0FqfzgeEN+Xgxffh1nP14ObKHFBDLylsk4FAKi8ZlpqE/qeW5t48cnxW/LUXp/nQBa+OX4kYfhBBLuXUDCmobQDDdfj3TXYDDZtXXejX9IV1850Q+efI/xUVvqp4PPpckHkYyItw3Lihqxr7jJF04xvZ9XwLd5Rhfi1vtGLIOagNX5kaFqNEIRfdujua8XgeGPdmX0a7Ua9G5QnlEwa4M2f7/qBasUcfGjWsglJ99PMT2fZXjaQAU6jNCuhFgQ0T/jp+pO1qZxC2jbXETI5IwsKABhOo9TDsh9BRhb9btzsP/PUmF1wr7nuzowBDr5g+tt5ppGWEorsND4SIOSEhve29wWvNCgvUSB9mxoWF6palCdO0L4ywQU0xz5r177T/jI6NR1B1Ctf7kHdoi+kNJYa6sPPtLkxIW4npdspNge8IMCFRMXnHfLDsRKoPTuUM3d5W7ZZbVtzvj9QZuePgioS+g4CHKYoxBO57STXU6djD/QPjfnu0vTpAFZnAGMsnsNIf6HBzKR+T3Zcs9dmMqy7daEkvsna9aSDNOGihIxZ2pJZA6i2Z/uXqk6UzNi66pxvX+fxEsfUUhchIHDdVRXX4pX397EsDxKNby3kLxi8KWDn2MVxsBwuONrmQdRIfYwJ0gIvQF2de/BU3HNHAT1u46l2hMGJ9nc20vrdOPpbOetcnFxGlboPs1EhQQM504Zu2RG/uLWn6/SI3ksRjg6gkT7xeM7eswr/SKsQY6sQF9M/AroEzlUCFYex1XtF5z5tIInmTbacfCIvjymseyCqWV8ZDtcbZkImhWw1Oq8L8dX7rHv7izD+nJy9zc1hRDUxynvakFhFUUvoJUj89FE9VTsVeYHhcq/o7bJi4o8L+ugOVmZ78QJ0+LSO6uSeji++vnNBM0ynx6JA6k0iyoK+RBSfXlky+WIe/eELCnTCbtPkACC6iJoWKlm+C5ZaNMOMK4k3O6Yy1j1E3HWpbLX50=', 'X-Amz-Content-SHA256': b'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855', 'Authorization': b'AWS4-HMAC-SHA256 Credential=ASIA2ATG5ZYSLE6QH7MB/20240419/eu-west-2/s3/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date;x-amz-security-token, Signature=cbe75b8e5a20303f91c52fb09403c044596e17e29cc594c6005f7ef7daacb044', 'amz-sdk-invocation-id': b'1d6620d4-05b8-402b-a12f-78afae3e68b7', 'amz-sdk-request': b'attempt=1'}>
[2024-04-19 19:36:55,061: DEBUG/ForkPoolWorker-3] Certificate path: /home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/certifi/cacert.pem
[2024-04-19 19:36:55,077: DEBUG/ForkPoolWorker-3] https://comp0239-ucabrz5.s3.eu-west-2.amazonaws.com:443 "GET /54ae161caf12eb6bc208836b44ed8f0d.jpg HTTP/1.1" 200 142969
[2024-04-19 19:36:55,078: DEBUG/ForkPoolWorker-3] Response headers: {'x-amz-id-2': 'kG3TgQ/Ozdc1dIJr5b7u97p54rZPTfkgVFW4mAXCY6yFF7BfVv9RwPGgIrjlyrVUyvccwP1QP7XhEyKxzwgYtw==', 'x-amz-request-id': 'NZ31A94EF6NVEKW0', 'Date': 'Fri, 19 Apr 2024 19:36:56 GMT', 'Last-Modified': 'Fri, 19 Apr 2024 19:36:55 GMT', 'ETag': '"54ae161caf12eb6bc208836b44ed8f0d"', 'x-amz-server-side-encryption': 'AES256', 'Accept-Ranges': 'bytes', 'Content-Type': 'binary/octet-stream', 'Server': 'AmazonS3', 'Content-Length': '142969'}
[2024-04-19 19:36:55,078: DEBUG/ForkPoolWorker-3] Response body:
<botocore.response.StreamingBody object at 0x7fc0117e6280>
[2024-04-19 19:36:55,079: DEBUG/ForkPoolWorker-3] Event needs-retry.s3.GetObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7fc0c8086bb0>
[2024-04-19 19:36:55,080: DEBUG/ForkPoolWorker-3] No retry needed.
[2024-04-19 19:36:55,080: DEBUG/ForkPoolWorker-3] Event needs-retry.s3.GetObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7fc0c8086c70>>
[2024-04-19 19:36:55,134: ERROR/ForkPoolWorker-3] Task app.fetch_and_process_image[335370a5-a7ea-42ff-9aeb-91a0f89703b5] raised unexpected: NameError("name 'processor' is not defined")
Traceback (most recent call last):
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 453, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 736, in __protected_call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 95, in fetch_and_process_image
    return process_image(s3_key)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/local.py", line 182, in __call__
    return self._get_current_object()(*a, **kw)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/trace.py", line 737, in __protected_call__
    return orig(self, *args, **kwargs)
  File "/home/ec2-user/data/blip_venv/lib64/python3.9/site-packages/celery/app/task.py", line 411, in __call__
    return self.run(*args, **kwargs)
  File "/home/ec2-user/data/COMP0239-CW/BLIP/app.py", line 116, in process_image
    if processor is None or model is None:
NameError: name 'processor' is not defined
[2024-04-19 19:37:15,520: DEBUG/MainProcess] | Worker: Closing Hub...
[2024-04-19 19:37:15,520: DEBUG/MainProcess] | Worker: Closing Pool...
[2024-04-19 19:37:15,520: DEBUG/MainProcess] | Worker: Closing Consumer...
[2024-04-19 19:37:15,520: DEBUG/MainProcess] | Worker: Stopping Consumer...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Closing Connection...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Closing Events...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Closing Mingle...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Closing Gossip...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Closing Tasks...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Closing Control...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Closing Heart...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Closing event loop...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Stopping event loop...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Stopping Heart...
[2024-04-19 19:37:15,521: DEBUG/MainProcess] | Consumer: Stopping Control...
[2024-04-19 19:37:15,522: DEBUG/MainProcess] | Consumer: Stopping Tasks...
[2024-04-19 19:37:15,522: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 19:37:15,522: DEBUG/MainProcess] | Consumer: Stopping Gossip...
[2024-04-19 19:37:15,523: DEBUG/MainProcess] | Consumer: Stopping Mingle...
[2024-04-19 19:37:15,523: DEBUG/MainProcess] | Consumer: Stopping Events...
[2024-04-19 19:37:15,523: DEBUG/MainProcess] | Consumer: Stopping Connection...
[2024-04-19 19:37:15,523: DEBUG/MainProcess] | Worker: Stopping Pool...
[2024-04-19 19:37:16,589: DEBUG/MainProcess] | Worker: Stopping Hub...
[2024-04-19 19:37:16,589: DEBUG/MainProcess] | Consumer: Shutdown Heart...
[2024-04-19 19:37:16,589: DEBUG/MainProcess] | Consumer: Shutdown Control...
[2024-04-19 19:37:16,589: DEBUG/MainProcess] | Consumer: Shutdown Tasks...
[2024-04-19 19:37:16,589: DEBUG/MainProcess] Canceling task consumer...
[2024-04-19 19:37:16,589: DEBUG/MainProcess] Closing consumer channel...
[2024-04-19 19:37:16,589: DEBUG/MainProcess] | Consumer: Shutdown Gossip...
[2024-04-19 19:37:16,589: DEBUG/MainProcess] | Consumer: Shutdown Events...
[2024-04-19 19:37:16,590: DEBUG/MainProcess] | Consumer: Shutdown Connection...
[2024-04-19 19:37:16,591: DEBUG/MainProcess] removing tasks from inqueue until task handler finished
