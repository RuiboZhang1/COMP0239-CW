<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Caption Generator</title>
    <!-- Include Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- Optional: Include Bootstrap JavaScript and dependencies -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <style>
        .drag-area {
            border: 2px dashed #ccc;
            border-radius: 3px;
            padding: 30px;
            text-align: center;
            margin: 10px;
        }
        .drag-area.highlight {
            border-color: green;
        }
        .output {
            margin-top: 20px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 3px;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <h2>Inference API</h2>
    <p>Image-to-Text</p>
    <div id="drag-area" class="drag-area">
        <div class="text-center">
            <p>Drag image file here or click to browse from your device</p>
            <input type="file" id="fileInput" accept="image/jpeg" style="display: none;" />
        </div>
    </div>
    <div id="output" class="output"></div>
</div>

<script>
    var dragArea = document.getElementById('drag-area');
    var output = document.getElementById('output');
    var fileInput = document.getElementById('fileInput');

    dragArea.addEventListener('click', function() {
        fileInput.click();
    });

    fileInput.addEventListener('change', function() {
        if (this.files && this.files[0]) {
            var reader = new FileReader();
            reader.onload = function(e) {
                // Show the image
                var img = document.createElement('img');
                img.src = e.target.result;
                img.style.width = '100%';
                output.innerHTML = ''; // Clear the output area
                output.appendChild(img);

                // TODO: Send the image to the server and retrieve the caption
                // This is where you would make an AJAX call to your Flask server
                // and handle the response to display the caption
            };
            reader.readAsDataURL(this.files[0]);
        }
    });

    dragArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        dragArea.classList.add('highlight');
    });

    dragArea.addEventListener('dragleave', function(e) {
        e.preventDefault();
        dragArea.classList.remove('highlight');
    });

    dragArea.addEventListener('drop', function(e) {
        e.preventDefault();
        dragArea.classList.remove('highlight');
        if (e.dataTransfer.files && e.dataTransfer.files[0]) {
            fileInput.files = e.dataTransfer.files;
            fileInput.dispatchEvent(new Event('change'));
        }
    });
</script>

</body>
</html>
